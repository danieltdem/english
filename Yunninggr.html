<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±æ–‡æ–‡æ³•æ¸¬é©—ï¼šå½¢å®¹è©æ¯”è¼ƒç´šèˆ‡æœ€é«˜ç´š</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            text-align: center;
            background: white;
            padding: 30px 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 600px;
            transition: all 0.3s ease;
        }
        h1 {
            color: #333;
            margin-top: 10px;
            margin-bottom: 10px;
            font-size: 28px;
        }
        p {
            color: #666;
            margin-bottom: 20px;
            font-size: 16px;
        }
        #game-image {
            transition: all 0.5s ease;
        }
        #game-image.correct {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.4);
        }
        #game-image.incorrect {
            animation: shake 0.5s;
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
        }
        #game-image.all-correct {
            animation: celebration 1s ease-in-out;
            box-shadow: 0 8px 25px rgba(253, 203, 110, 0.4);
        }
        #game-status {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.5s ease;
        }
        #game-status.correct {
            background: linear-gradient(135deg, #00b894, #00a085);
            transform: scale(1.1);
        }
        #game-status.incorrect {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            animation: shake 0.5s;
        }
        #game-status.all-correct {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            animation: celebration 1s ease-in-out;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        @keyframes celebration {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(5deg); }
        }
        #progress {
            font-size: 16px;
            color: #555;
            margin-bottom: 15px;
            font-weight: bold;
            padding: 8px 16px;
            background: #f8f9fa;
            border-radius: 20px;
            display: inline-block;
        }
        #question {
            font-size: 22px;
            margin: 20px 0;
            color: #2c3e50;
            line-height: 1.5;
            background: #f1f3f4;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #74b9ff;
        }
        #options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }
        .option-btn {
            padding: 15px 20px;
            font-size: 18px;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-align: center;
            transform: translateY(0);
        }
        .option-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #0984e3, #74b9ff);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .option-btn.correct {
            background: linear-gradient(135deg, #00b894, #00a085) !important;
            transform: scale(1.05);
        }
        .option-btn.incorrect {
            background: linear-gradient(135deg, #fd79a8, #e84393) !important;
            animation: shake 0.5s;
        }
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }
        #result {
            font-size: 24px;
            margin-top: 20px;
            font-weight: bold;
            padding: 10px;
            border-radius: 8px;
        }
        #explanation-container {
            font-size: 16px;
            margin-top: 15px;
            padding: 20px;
            background: linear-gradient(135deg, #fffbe6, #fff3cd);
            border-left: 5px solid #f39c12;
            border-radius: 10px;
            text-align: left;
            line-height: 1.6;
            color: #5f4c0a;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        #score {
            font-size: 24px;
            margin-top: 10px;
            color: #333;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            font-weight: bold;
        }
        #wrong-questions {
            font-size: 16px;
            margin-top: 20px;
            text-align: left;
            white-space: pre-wrap;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #e74c3c;
            max-height: 250px;
            overflow-y: auto;
            line-height: 1.5;
        }
        #next-btn, #restart-btn, #retest-wrong-btn {
            padding: 15px 30px;
            font-size: 18px;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        #next-btn { 
            background: linear-gradient(135deg, #fdcb6e, #e17055);
        }
        #next-btn:hover { 
            background: linear-gradient(135deg, #e17055, #fdcb6e);
            transform: translateY(-2px);
        }
        #restart-btn { 
            background: linear-gradient(135deg, #00cec9, #00b894);
        }
        #restart-btn:hover { 
            background: linear-gradient(135deg, #00b894, #00cec9);
            transform: translateY(-2px);
        }
        #retest-wrong-btn { 
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
        }
        #retest-wrong-btn:hover { 
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <img id="game-image" src="initial.png" alt="Game Scene" style="width: 150px; height: 150px; object-fit: contain; margin-bottom: 20px; border-radius: 50%; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: all 0.5s ease;">
        <div id="game-status" style="display: none;">ğŸ¯</div>
        <h1>æ–‡æ³•æ¸¬é©—ï¼šå½¢å®¹è©æ¯”è¼ƒç´šèˆ‡æœ€é«˜ç´š</h1>
        <p>è«‹æ ¹æ“šå¥å­æƒ…å¢ƒï¼Œé¸æ“‡æœ€é©åˆçš„ç­”æ¡ˆã€‚</p>
        
        <div id="quiz-area">
            <div id="progress"></div>
            <div id="question"></div>
            <div id="options-container"></div>
            <div id="result"></div>
            <div id="explanation-container" style="display: none;"></div>
            <button id="next-btn" style="display: none;">ä¸‹ä¸€é¡Œ â¡ï¸</button>
        </div>

        <div id="end-screen" style="display: none;">
            <h2>ğŸŠ æ¸¬é©—çµæŸï¼ ğŸŠ</h2>
            <div id="score"></div>
            <div id="wrong-questions"></div>
            <button id="restart-btn">ğŸ”„ å…¨éƒ¨é‡æ¸¬</button>
            <button id="retest-wrong-btn" style="display: none;">âŒ é‡æ¸¬éŒ¯é¡Œ</button>
        </div>
    </div>

    <script>
        // å­˜æ”¾æ‰€æœ‰é¡Œç›®çš„é¡Œåº«
        // --- åŸæœ‰çš„å½¢å®¹è©é¡Œç›® ---
        const originalAdjectiveQuestions = [
            { question: "My brother is much _______ than I am.", options: ["tall", "taller", "the tallest", "more tall"], answer: 1, explanation: "æ¯”è¼ƒå…©å€‹äººæ™‚ï¼Œå–®éŸ³ç¯€å½¢å®¹è© tall çš„æ¯”è¼ƒç´šæ˜¯ tallerã€‚" },
            { question: "This is _______ movie I have ever seen. It was terrible!", options: ["bad", "worse", "the worst", "the baddest"], answer: 2, explanation: "åœ¨ã€Œæ‰€æœ‰çœ‹éçš„é›»å½±ã€ä¸­æ¯”è¼ƒï¼Œè¦ç”¨æœ€é«˜ç´šã€‚bad çš„æœ€é«˜ç´šæ˜¯ä¸è¦å‰‡è®ŠåŒ– the worstã€‚" },
            { question: "Your new car is _______ than your old one.", options: ["good", "gooder", "the best", "better"], answer: 3, explanation: "æ¯”è¼ƒå…©æ¨£æ±è¥¿æ™‚ï¼Œè¦ç”¨æ¯”è¼ƒç´šã€‚good çš„æ¯”è¼ƒç´šæ˜¯ä¸è¦å‰‡è®ŠåŒ– betterã€‚" },
            { question: "This book is _______ than the movie.", options: ["interesting", "more interesting", "the most interesting", "interestinger"], answer: 1, explanation: "interesting æ˜¯é•·éŸ³ç¯€å–®å­—ï¼Œæ¯”è¼ƒç´šè¦åœ¨å‰é¢åŠ  moreã€‚" },
            { question: "Of the three sisters, she is _______.", options: ["the oldest", "older", "old", "more old"], answer: 0, explanation: "æ¯”è¼ƒä¸‰å€‹äººæ™‚ï¼Œè¦ç”¨æœ€é«˜ç´š the oldestã€‚" },
            { question: "A bicycle is _______ than a car.", options: ["less expensive", "the least expensive", "not expensive", "expensiver"], answer: 0, explanation: "è¡¨ç¤ºã€Œæ¯”è¼ƒä¸æ˜‚è²´ã€ï¼Œæ‡‰ä½¿ç”¨ less expensive than çš„å¥å‹ã€‚" },
            { question: "Today is _______ than yesterday. I need to turn on the AC.", options: ["hoter", "the hottest", "hotter", "more hot"], answer: 2, explanation: "hot æ˜¯ã€Œå­éŸ³-æ¯éŸ³-å­éŸ³ã€çµå°¾ï¼Œæ¯”è¼ƒç´šè¦é‡è¤‡å­—å°¾ t å†åŠ  erã€‚" },
            { question: "My suitcase is _______ than yours. Mine is 20kg, and yours is 15kg.", options: ["heavy", "the heaviest", "heavier", "more heavy"], answer: 2, explanation: "heavy å­—å°¾æ˜¯ yï¼Œæ¯”è¼ƒç´šè¦å» y å†åŠ  ierã€‚" },
            { question: "Tom is as _______ as his brother. They are both 170cm.", options: ["tall", "taller", "the tallest", "so tall"], answer: 0, explanation: "è¡¨ç¤ºã€Œå…©è€…ç¨‹åº¦ç›¸åŒã€çš„ as...as å¥å‹ä¸­ï¼Œè¦ä½¿ç”¨å½¢å®¹è©çš„åŸç´šã€‚" },
            { question: "She is _______ girl in our school. Everyone likes her.", options: ["popular", "more popular", "the most popular", "popularest"], answer: 2, explanation: "åœ¨ã€Œå…¨æ ¡ã€ç¯„åœæ¯”è¼ƒï¼Œè¦ç”¨æœ€é«˜ç´šã€‚popular æ˜¯é•·éŸ³ç¯€å–®å­—ï¼Œæœ€é«˜ç´šæ˜¯ the most popularã€‚" },
            { question: "The library is _______ from my house than the park is.", options: ["farther", "farrer", "the farthest", "further"], answer: 0, explanation: "æ¯”è¼ƒå…©åœ°ã€Œå¯¦éš›è·é›¢ã€çš„é è¿‘ï¼Œè¦ç”¨ far çš„æ¯”è¼ƒç´š fartherã€‚" },
            { question: "Of all the fruits, the lemon is _______.", options: ["sour", "sourer", "the sourest", "more sour"], answer: 2, explanation: "åœ¨ã€Œæ‰€æœ‰æ°´æœã€ä¸­æ¯”è¼ƒï¼Œè¦ç”¨æœ€é«˜ç´š the sourestã€‚" },
            { question: "My phone is not as _______ as the new model.", options: ["powerful", "more powerful", "so powerful", "the most powerful"], answer: 0, explanation: "åœ¨ not as...as çš„å¥å‹ä¸­ï¼Œè¦ä½¿ç”¨å½¢å®¹è©çš„åŸç´šã€‚" },
            { question: "I have _______ time than you, so I must hurry.", options: ["little", "less", "the least", "littler"], answer: 1, explanation: "Time æ˜¯ä¸å¯æ•¸åè©ï¼Œæ¯”è¼ƒã€Œæ›´å°‘ã€çš„æ™‚é–“è¦ç”¨ little çš„æ¯”è¼ƒç´š lessã€‚" },
            { question: "Of all my classes, English is _______.", options: ["easy", "the easiest", "easier", "the most easy"], answer: 1, explanation: "åœ¨ã€Œæ‰€æœ‰èª²ç¨‹ã€ä¸­æ¯”è¼ƒï¼Œè¦ç”¨æœ€é«˜ç´šã€‚easy çš„æœ€é«˜ç´šæ˜¯ the easiestã€‚" }
        ];

        // --- æ–°å¢çš„å‰¯è©é¡Œç›® (å…±20é¡Œ) ---
        const newAdverbQuestions = [
            { question: "He is a good singer. He sings very ______.", options: ["good", "goodly", "well", "better"], answer: 2, explanation: "ä¿®é£¾å‹•è© sings è¦ç”¨å‰¯è©ã€‚good çš„å‰¯è©æ˜¯ä¸è¦å‰‡çš„ wellã€‚" },
            { question: "To win the championship, Daniel practises very ______.", options: ["hard", "hardly", "harder", "more hard"], answer: 0, explanation: "ä¿®é£¾å‹•è© practises è¦ç”¨å‰¯è© hard (åŠªåŠ›åœ°)ã€‚hardly çš„æ„æ€æ˜¯ã€Œå¹¾ä¹ä¸ã€ã€‚" },
            { question: "Antonio is running ______ so he's going to win the race.", options: ["fast", "fastly", "faster", "fastest"], answer: 0, explanation: "ä¿®é£¾å‹•è© running è¦ç”¨å‰¯è© fastã€‚fastly æ˜¯éŒ¯èª¤çš„ç”¨æ³•ã€‚" },
            { question: "He has a problem with his leg and can't run ______ as Philip.", options: ["good", "well", "better", "best"], answer: 1, explanation: "åœ¨ as...as çš„å¥å‹ä¸­ï¼Œè¦ç”¨å‰¯è©çš„åŸç´šä¾†ä¿®é£¾å‹•è© runï¼Œæ‰€ä»¥æ˜¯ wellã€‚" },
            { question: "The people are cheering ______ for the skaters.", options: ["loud", "loudly", "louder", "loudest"], answer: 1, explanation: "ä¿®é£¾å‹•è© cheering è¦ç”¨å‰¯è© loudly (å¤§è²åœ°)ã€‚" },
            { question: "Which sentence has the correct adverb order?", options: ["She danced last night beautifully at the party.", "She danced beautifully last night at the party.", "She danced at the party beautifully last night.", "She danced beautifully at the party last night."], answer: 3, explanation: "å‰¯è©çš„é»ƒé‡‘é †åºæ˜¯ï¼šæƒ…æ…‹ (beautifully) â†’ åœ°æ–¹ (at the party) â†’ æ™‚é–“ (last night)ã€‚" },
            { question: "I haven't seen you ______. How have you been?", options: ["late", "lately", "later", "latest"], answer: 1, explanation: "lately çš„æ„æ€æ˜¯ã€Œæœ€è¿‘ã€ï¼Œç¬¦åˆå¥æ„ã€‚late çš„æ„æ€æ˜¯ã€Œé²åˆ°ã€ã€‚" },
            { question: "He ______ eats breakfast; he always says he's not hungry.", options: ["hard", "hardly", "often", "neverly"], answer: 1, explanation: "hardly çš„æ„æ€æ˜¯ã€Œå¹¾ä¹ä¸ã€ï¼Œç¬¦åˆå¥æ„ã€‚hard æ˜¯ã€ŒåŠªåŠ›åœ°ã€ã€‚" },
            { question: "A car goes quickly, but a plane flies ______.", options: ["quick", "more quickly", "quicker", "the most quickly"], answer: 1, explanation: "quickly æ˜¯é•·éŸ³ç¯€å‰¯è©ï¼Œæ¯”è¼ƒç´šè¦ç”¨ more quicklyã€‚" },
            { question: "Anne drives badly, Paul drives worse, but Denise drives ______ of all.", options: ["bad", "the baddest", "worst", "the worst"], answer: 3, explanation: "æ¯”è¼ƒä¸‰å€‹äººï¼Œè¦ç”¨æœ€é«˜ç´šã€‚badly çš„æœ€é«˜ç´šæ˜¯ä¸è¦å‰‡è®ŠåŒ– the worstã€‚" },
            { question: "My father always works ______ in his office.", options: ["hard", "hardly", "late", "lately"], answer: 0, explanation: "ä¿®é£¾å‹•è© works è¦ç”¨å‰¯è© hard (åŠªåŠ›åœ°)ã€‚" },
            { question: "Which word is an adjective, NOT an adverb?", options: ["slowly", "friendly", "quickly", "early"], answer: 1, explanation: "friendly (å‹å–„çš„) æ˜¯å½¢å®¹è©ã€‚å‰¯è©ç”¨æ³•æ˜¯ in a friendly wayã€‚" },
            { question: "He arrived ______ for the meeting.", options: ["earlily", "earlier", "early", "more early"], answer: 2, explanation: "ä¿®é£¾å‹•è© arrived è¦ç”¨å‰¯è© earlyã€‚early çš„å‰¯è©èˆ‡å½¢å®¹è©åŒå½¢ã€‚" },
            { question: "She speaks English more ______ than I do.", options: ["fluent", "fluently", "fluentlier", "most fluently"], answer: 1, explanation: "ä¿®é£¾å‹•è© speaksï¼Œä¸”æ˜¯æ¯”è¼ƒç´šï¼Œè¦ç”¨ more + å‰¯è© (fluently)ã€‚" },
            { question: "Of all the students, Jenny works ______.", options: ["the hardest", "hardest", "the most hard", "the most hardly"], answer: 0, explanation: "åœ¨ã€Œæ‰€æœ‰å­¸ç”Ÿã€ä¸­æ¯”è¼ƒï¼Œè¦ç”¨æœ€é«˜ç´š the hardestã€‚" },
            { question: "Please drive ______! The road is icy.", options: ["careful", "more careful", "carefully", "caredully"], answer: 2, explanation: "ä¿®é£¾å‹•è© drive è¦ç”¨å‰¯è© carefullyã€‚" },
            { question: "I ______ go to the cinema, maybe once or twice a year.", options: ["usually", "always", "never", "rarely"], answer: 3, explanation: "rarely (å¾ˆå°‘) æœ€ç¬¦åˆã€Œä¸€å¹´ä¸€å…©æ¬¡ã€çš„é »ç‡ã€‚" },
            { question: "He does not swim as ______ as his brother.", options: ["fast", "fastly", "faster", "fastest"], answer: 0, explanation: "åœ¨ as...as çš„å¥å‹ä¸­ï¼Œè¦ä½¿ç”¨å‰¯è©çš„åŸç´š fastã€‚" },
            { question: "Kathy did well on the test, but Betty did ______.", options: ["best", "better", "good", "weller"], answer: 1, explanation: "æ¯”è¼ƒ Kathy å’Œ Betty å…©äººï¼Œè¦ç”¨ well çš„æ¯”è¼ƒç´š betterã€‚" },
            { question: "The children played ______ in the garden yesterday.", options: ["happy", "happily", "happier", "happiest"], answer: 1, explanation: "ä¿®é£¾å‹•è© played è¦ç”¨å‰¯è© happilyã€‚" }
        ];

        // --- å°‡æ–°èˆŠé¡Œåº«åˆä½µ ---
        const allQuestions = [...originalAdjectiveQuestions, ...newAdverbQuestions];

        // å®£å‘ŠéŠæˆ²æœƒç”¨åˆ°çš„è®Šæ•¸
        let currentQuestionIndex = 0;
        let score = 0;
        let questions = [];
        let wrongQuestions = [];

        // å–å¾— HTML é é¢ä¸Šçš„å„å€‹å…ƒç´ 
        const quizArea = document.getElementById('quiz-area');
        const endScreen = document.getElementById('end-screen');
        const questionEl = document.getElementById('question');
        const optionsContainer = document.getElementById('options-container');
        const resultEl = document.getElementById('result');
        const explanationEl = document.getElementById('explanation-container');
        const progressEl = document.getElementById('progress');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const retestWrongBtn = document.getElementById('retest-wrong-btn');
        const gameImage = document.getElementById('game-image');
        const gameStatus = document.getElementById('game-status');
        const titleEl = document.querySelector('.container h1');

        // æ‰“äº‚é¡Œç›®é †åºçš„å‡½å¼
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // é–‹å§‹éŠæˆ²çš„å‡½å¼
        function startGame(questionList) {
            questions = [...questionList];
            shuffle(questions);
            currentQuestionIndex = 0;
            score = 0;
            wrongQuestions = [];
            
            // æ›´æ–°æ¨™é¡Œ
            titleEl.textContent = 'æ–‡æ³•æ¸¬é©—ï¼šå½¢å®¹è©èˆ‡å‰¯è©';
            
            quizArea.style.display = 'block';
            endScreen.style.display = 'none';
            gameImage.src = 'initial.png';
            gameImage.className = '';
            gameStatus.textContent = 'ğŸ¯';
            gameStatus.className = '';
            
            showQuestion();
        }

        // é¡¯ç¤ºä¸€é“é¡Œç›®çš„å‡½å¼
        function showQuestion() {
            resetState();
            const currentQuestion = questions[currentQuestionIndex];
            progressEl.textContent = `ç¬¬ ${currentQuestionIndex + 1} / ${questions.length} é¡Œ`;
            questionEl.textContent = currentQuestion.question;

            currentQuestion.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('option-btn');
                button.dataset.index = index;
                button.addEventListener('click', selectAnswer);
                optionsContainer.appendChild(button);
            });
        }

        // é‡ç½®ç•«é¢ç‹€æ…‹çš„å‡½å¼ (æ›åˆ°ä¸‹ä¸€é¡Œå‰)
        function resetState() {
            resultEl.textContent = '';
            explanationEl.style.display = 'none';
            nextBtn.style.display = 'none';
            while (optionsContainer.firstChild) {
                optionsContainer.removeChild(optionsContainer.firstChild);
            }
            gameImage.src = 'initial.png';
            gameImage.className = '';
            gameStatus.textContent = 'ğŸ¯';
            gameStatus.className = '';
        }

        // é¸æ“‡ç­”æ¡ˆæ™‚è§¸ç™¼çš„å‡½å¼
        function selectAnswer(e) {
            const selectedBtn = e.target;
            const selectedIndex = parseInt(selectedBtn.dataset.index);
            const currentQuestion = questions[currentQuestionIndex];
            const correctIndex = currentQuestion.answer;

            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = true;
            });

            if (selectedIndex === correctIndex) {
                score++;
                selectedBtn.classList.add('correct');
                resultEl.textContent = 'âœ… æ­£ç¢ºï¼å¤ªæ£’äº†ï¼';
                resultEl.style.color = '#2ecc71';
                gameImage.src = 'correct.png';
                gameImage.classList.add('correct');
                gameStatus.textContent = 'ğŸ‰';
                gameStatus.classList.add('correct');
                
                setTimeout(() => {
                    currentQuestionIndex++;
                    if (currentQuestionIndex < questions.length) {
                        showQuestion();
                    } else {
                        endGame();
                    }
                }, 1500);
            } else {
                selectedBtn.classList.add('incorrect');
                optionsContainer.children[correctIndex].classList.add('correct');
                resultEl.textContent = 'âŒ ç­”éŒ¯äº†ï¼Œå†æ¥å†å²ï¼';
                resultEl.style.color = '#e74c3c';
                gameImage.src = 'incorrect.png';
                gameImage.classList.add('incorrect');
                gameStatus.textContent = 'ğŸ˜…';
                gameStatus.classList.add('incorrect');
                
                explanationEl.textContent = `ğŸ’¡ æ–‡æ³•è§£æï¼š${currentQuestion.explanation}`;
                explanationEl.style.display = 'block';

                wrongQuestions.push({
                    ...currentQuestion,
                    userAnswer: currentQuestion.options[selectedIndex]
                });
                nextBtn.style.display = 'block';
            }
        }

        // éŠæˆ²çµæŸæ™‚å‘¼å«çš„å‡½å¼
        function endGame() {
            quizArea.style.display = 'none';
            endScreen.style.display = 'block';
            
            const scoreEl = document.getElementById('score');
            scoreEl.textContent = `ğŸ¯ ä½ çš„æœ€çµ‚åˆ†æ•¸ï¼š${score} / ${questions.length} (${Math.round(score/questions.length*100)}%)`;

            const wrongQuestionsEl = document.getElementById('wrong-questions');
            if (score === questions.length) {
                gameImage.src = 'all_correct.png';
                gameImage.classList.add('all-correct');
                gameStatus.textContent = 'ğŸ†';
                gameStatus.classList.add('all-correct');
                wrongQuestionsEl.textContent = 'ğŸŠ å¤ªæ£’äº†ï¼ä½ å…¨éƒ¨ç­”å°äº†ï¼ä½ å·²ç¶“å®Œå…¨æŒæ¡å½¢å®¹è©èˆ‡å‰¯è©çš„ç”¨æ³•ï¼ ğŸŠ';
                wrongQuestionsEl.style.borderLeftColor = '#2ecc71';
                wrongQuestionsEl.style.background = '#d4edda';
                wrongQuestionsEl.style.color = '#155724';
                wrongQuestionsEl.style.display = 'block';
                retestWrongBtn.style.display = 'none';
            } else {
                gameImage.src = 'not_all_correct.png';
                gameStatus.textContent = 'ğŸ“';
                let wrongText = 'ğŸ“‹ ä½ ç­”éŒ¯çš„é¡Œç›®å›é¡§ï¼š\n\n';
                wrongQuestions.forEach((q, index) => {
                    wrongText += `${index + 1}. ${q.question}\n`;
                    wrongText += `    ä½ çš„ç­”æ¡ˆ: "${q.userAnswer}" âŒ\n`;
                    wrongText += `    æ­£ç¢ºç­”æ¡ˆ: "${q.options[q.answer]}" âœ…\n`;
                    wrongText += `    è§£æ: ${q.explanation}\n\n`;
                });
                wrongQuestionsEl.textContent = wrongText;
                wrongQuestionsEl.style.borderLeftColor = '#e74c3c';
                wrongQuestionsEl.style.background = '#f8d7da';
                wrongQuestionsEl.style.color = '#721c24';
                wrongQuestionsEl.style.display = 'block';
                retestWrongBtn.style.display = 'inline-block';
            }
        }
        
        // é»æ“Šã€Œä¸‹ä¸€é¡Œã€æŒ‰éˆ•
        nextBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                endGame();
            }
        });

        // é»æ“Šã€Œå…¨éƒ¨é‡æ¸¬ã€æŒ‰éˆ•
        restartBtn.addEventListener('click', () => startGame(allQuestions));

        // é»æ“Šã€Œé‡æ¸¬éŒ¯é¡Œã€æŒ‰éˆ•
        retestWrongBtn.addEventListener('click', () => {
            if (wrongQuestions.length > 0) {
                const retestList = wrongQuestions.map(({ userAnswer, ...rest }) => rest);
                startGame(retestList);
            }
        });

        // ç¶²é è¼‰å…¥å¾Œï¼Œè‡ªå‹•é–‹å§‹éŠæˆ²
        startGame(allQuestions);
    </script>
</body>
</html>