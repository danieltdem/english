<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–®å­—æ‹¼å¯«æ¸¬é©—</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 20px 0;
            background-color: #f0f0f0;
        }
        .container {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 500px;
        }
        h1 {
            color: #333;
            margin-top: 10px;
        }
        #game-image {
            width: 100%;
            max-width: 300px;
            height: auto;
            object-fit: contain;
            margin-bottom: 10px;
        }
        #question {
            font-size: 24px;
            margin: 20px 0;
            line-height: 1.4;
        }
        input {
            padding: 10px;
            font-size: 18px;
            width: 80%;
            margin-bottom: 10px;
        }
        button {
            padding: 10px 20px;
            font-size: 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        #result {
            font-size: 20px;
            margin-top: 20px;
        }
        #mnemonic {
            font-size: 16px;
            margin-top: 10px;
            color: #3d5afe;
            text-align: left;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            background-color: #f3f4ff;
            line-height: 1.5;
        }
        #score {
            font-size: 18px;
            margin-top: 10px;
        }
        #wrong-words {
            font-size: 16px;
            margin-top: 20px;
            text-align: left;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <img id="game-image" src="initial.png" alt="Game Scene">
        <h1>å–®å­—æ‹¼å¯«æ¸¬é©—</h1>
        <p>è«‹æ ¹æ“šçµ¦å‡ºçš„ä¸­æ–‡æ„æ€ï¼Œè¼¸å…¥æ­£ç¢ºçš„è‹±æ–‡æ‹¼å¯«ã€‚å…±47é¡Œï¼Œé †åºéš¨æ©Ÿã€‚</p>
        <div id="question"></div>
        <input type="text" id="answer" placeholder="è¼¸å…¥è‹±æ–‡æ‹¼å¯«">
        <button id="submit">æäº¤</button>
        <div id="result"></div>
        <div id="mnemonic" style="display: none;"></div>
        <div id="score">åˆ†æ•¸: 0 / 0</div>
        <div id="wrong-words"></div>
        <button id="restart" style="display: none; margin-top: 20px;">é‡æ–°é–‹å§‹</button>
        <button id="retest-wrong" style="display: none; margin-top: 20px;">é‡æ¸¬éŒ¯é¡Œ</button>
    </div>

    <script>
        const words = [
            { en: 'same', zh: 'ç›¸åŒçš„ (ã„’ã„§ã„¤ ã„Šã„¨ã„¥ËŠ)', mnemonic: '`same` å’Œ `name` (åå­—) æŠ¼éŸ»ã€‚æƒ³åƒå…©å€‹æœ‰è‘—ç›¸åŒåå­— (same name) çš„äººï¼Œä»–å€‘æœ‰å¾ˆå¤šç›¸åŒ(same)ä¹‹è™•ã€‚' },
            { en: 'story', zh: 'æ•…äº‹ (ã„ã„¨Ë‹ ã„•Ë‹)', mnemonic: '`story` (æ•…äº‹) å’Œ `storey` (æ¨“å±¤) ç™¼éŸ³ç›¸åŒã€‚æƒ³åƒåœ¨ä¸€æ£Ÿå¤§æ¨“çš„æ¯ä¸€å±¤ (storey) éƒ½åœ¨ä¸Šæ¼”è‘—ä¸åŒçš„æ•…äº‹ (story)ã€‚' },
            { en: 'many', zh: 'è¨±å¤š (ã„’ã„©Ë‡ ã„‰ã„¨ã„›)', mnemonic: '`many` çš„ç™¼éŸ³è½èµ·ä¾†åƒ `money` (éŒ¢)ã€‚è¨±å¤š(many)äººéƒ½æƒ³è¦å¾ˆå¤šéŒ¢(money)ã€‚' },
            { en: 'culture', zh: 'æ–‡åŒ– (ã„¨ã„£ËŠ ã„ã„¨ã„šË‹)', mnemonic: '`culture` (æ–‡åŒ–) è£¡é¢è—è‘— `cult` (æ•™æ´¾)ã€‚æ¯å€‹æ•™æ´¾ (cult) éƒ½æœ‰è‡ªå·±ç¨ç‰¹çš„æ–‡åŒ– (culture)ã€‚' },
            { en: 'person', zh: 'ä¸€å€‹äºº (ã„§ËŠ ã„ã„œË‹ ã„–ã„£ËŠ)', mnemonic: 'æ‹†è§£æˆ `per` (æ¯ä¸€å€‹) å’Œ `son` (å…’å­)ã€‚æ¯ä¸€å€‹å…’å­ (every son) éƒ½æ˜¯ä¸€å€‹ç¨ç«‹çš„äºº (person)ã€‚' },
            { en: 'people', zh: 'äººå€‘ (ã„–ã„£ËŠ ã„‡ã„£ËŠ)', mnemonic: '`people` çš„ç™¼éŸ³é–‹é ­è½èµ·ä¾†åƒ `Pepsi` (ç™¾äº‹å¯æ¨‚)ã€‚å¾ˆå¤šäººå€‘(people)éƒ½å–œæ­¡å–ç™¾äº‹å¯æ¨‚ã€‚' },
            { en: 'black', zh: 'é»‘è‰² (ã„ã„Ÿ ã„™ã„œË‹)', mnemonic: 'æ‹†è§£æˆ `b` å’Œ `lack` (ç¼ºå°‘)ã€‚ç•¶ç¼ºå°‘ (lack) å…‰ç·šæ™‚ï¼Œä¸–ç•Œå°±æ˜¯é»‘è‰² (black) çš„ã€‚' },
            { en: 'flag', zh: 'æ——å¹Ÿ (ã„‘ã„§ËŠ ã„“Ë‹)', mnemonic: 'æ‹†è§£æˆ `f` å’Œ `lag` (è½å¾Œ)ã€‚å¦‚æœä¸€å€‹åœ‹å®¶è½å¾Œ (lag) äº†ï¼Œå®ƒå°±ç„¡æ³•å‡èµ·å®ƒçš„æ——å¹Ÿ (flag)ã€‚' },
            { en: 'crab', zh: 'èƒèŸ¹ (ã„†ã„¤ËŠ ã„’ã„§ã„Ë‹)', mnemonic: '`crab` (èƒèŸ¹) çš„å¾ŒåŠéƒ¨ `rab` è½èµ·ä¾†åƒ `grab` (æŠ“)ã€‚èƒèŸ¹ (crab) æœƒç”¨ç‰ çš„çˆªå­æŠ“ä½ (grab) æ±è¥¿ã€‚' },
            { en: 'broom', zh: 'æƒå¸š (ã„™ã„ Ë‹ ã„“ã„¡Ë‡)', mnemonic: 'æ‹†è§£æˆ `b` å’Œ `room` (æˆ¿é–“)ã€‚ä½ éœ€è¦ä¸€æŠŠæƒå¸š (broom) ä¾†æ‰“æƒä½ çš„æˆ¿é–“ (room)ã€‚' },
            { en: 'bride', zh: 'æ–°å¨˜ (ã„’ã„§ã„£ ã„‹ã„§ã„¤ËŠ)', mnemonic: 'æ‹†è§£æˆ `b` å’Œ `ride` (é¨ä¹˜)ã€‚æ–°å¨˜ (bride) åœ¨å©šç¦®å¾Œæœƒå’Œæ–°éƒä¸€èµ·ä¹˜è»Š (ride) é›¢é–‹ã€‚' },
            { en: 'glass', zh: 'ç»ç’ƒ (ã„…ã„› ã„Œã„§ËŠ)', mnemonic: '`glass` (ç»ç’ƒ) è£¡æœ‰ `ass` (å±è‚¡)ã€‚å°å¿ƒåˆ¥è®“ä½ çš„å±è‚¡æ’åˆ°ç»ç’ƒ(glass)ï¼' },
            { en: 'enter', zh: 'é€²å…¥ (ã„ã„§ã„£Ë‹ ã„–ã„¨Ë‹)', mnemonic: 'è¯æƒ³éµç›¤ä¸Šçš„ `Enter` éµã€‚ä½ æŒ‰ä¸‹å®ƒä¾†ã€Œè¼¸å…¥ã€æˆ–ã€Œé€²å…¥ã€(enter) ä¸‹ä¸€å€‹æŒ‡ä»¤ã€‚' },
            { en: 'kite', zh: 'é¢¨ç® (ã„ˆã„¥ ã„“ã„¥)', mnemonic: '`kite` (é¢¨ç®) çš„å¾ŒåŠéƒ¨ `ite` è½èµ·ä¾†åƒ `height` (é«˜åº¦)ã€‚é¢¨ç® (kite) æœƒé£›åˆ°å¾ˆé«˜çš„é«˜åº¦ (height)ã€‚' },
            { en: 'jog', zh: 'æ…¢è·‘ (ã„‡ã„¢Ë‹ ã„†ã„ Ë‡)', mnemonic: '`jog` (æ…¢è·‘) å’Œ `dog` (ç‹—) æŠ¼éŸ»ã€‚æˆ‘æ¯å¤©éƒ½æœƒå’Œæˆ‘çš„ç‹— (dog) ä¸€èµ·å»æ…¢è·‘ (jog)ã€‚' },
            { en: 'fail', zh: 'å¤±æ•— (ã„• ã„…ã„Ë‹)', mnemonic: '`fail` (å¤±æ•—) å’Œ `fall` (è·Œå€’) å¾ˆåƒã€‚å¤±æ•— (fail) äº†å°±åƒè·Œå€’ (fall) äº†ä¸€æ¨£ï¼Œä½†å¯ä»¥å†ç«™èµ·ä¾†ã€‚' },
            { en: 'lie', zh: 'èªªè¬Š (ã„•ã„¨ã„› ã„ã„¨ã„¤Ë‡)', mnemonic: '`lie` (è¬Šè¨€) é€™å€‹å­—è—åœ¨ `believe` (ç›¸ä¿¡) çš„ä¸­é–“ã€‚æ‰€ä»¥ï¼Œä¸è¦ç›¸ä¿¡(be**lie**ve)è¬Šè¨€ã€‚' },
            { en: 'magazine', zh: 'é›œèªŒ (ã„—ã„šËŠ ã„“Ë‹)', mnemonic: '`magazine` (é›œèªŒ) å°±åƒä¸€å€‹ç¥å¥‡çš„ (magic) å ´æ™¯ (scene)ï¼Œè£¡é¢æœ‰å„ç¨®åœ–ç‰‡å’Œæ•…äº‹ã€‚' },
            { en: 'article', zh: 'æ–‡ç«  (ã„¨ã„£ËŠ ã„“ã„¤)', mnemonic: '`article` (æ–‡ç« ) è£¡é¢åŒ…å« `art` (è—è¡“)ã€‚ä¸€ç¯‡å¥½çš„æ–‡ç«  (article) å°±æ˜¯ä¸€é–€èªè¨€çš„è—è¡“ (art)ã€‚' },
            { en: 'message', zh: 'è¨Šæ¯ (ã„’ã„©ã„£Ë‹ ã„’ã„§ËŠ)', mnemonic: 'æ‹†è§£æˆ `mess` (æ··äº‚) å’Œ `age` (æ™‚ä»£)ã€‚åœ¨é€™å€‹è³‡è¨Šæ™‚ä»£ (age)ï¼Œæˆ‘å€‘æ¯å¤©æ”¶åˆ°çš„å¤§é‡è¨Šæ¯ (message) æœ‰æ™‚å€™æœƒé€ æˆæ··äº‚ (mess)ã€‚' },
            { en: 'important', zh: 'é‡è¦çš„ (ã„“ã„¨ã„¥Ë‹ ã„§ã„ Ë‹ ã„‰ã„œË™)', mnemonic: '`important` (é‡è¦çš„) å°±åƒä¸€éš»æœƒã€Œé€²å£ã€(import) æ±è¥¿çš„èèŸ» (ant)ã€‚é€™éš»èèŸ»éå¸¸é‡è¦ã€‚' },
            { en: 'build', zh: 'å»ºé€  (ã„ã„§ã„¢Ë‹ ã„—ã„ Ë‹)', mnemonic: '`build` (å»ºé€ ) çš„ç™¼éŸ³è½èµ·ä¾†åƒ `billed` (è¢«é–‹å¸³å–®)ã€‚ä½ è“‹äº†ä¸€æ£Ÿæˆ¿å­(build)ï¼Œç¾åœ¨è¦ä»˜å¸³å–®äº†ã€‚' },
            { en: 'all over', zh: 'åˆ°è™• (ã„‰ã„ Ë‹ ã„”ã„¨Ë‹)', mnemonic: 'é€™æ˜¯ä¸€å€‹ç‰‡èªï¼Œå¯ä»¥ç›´æ¥è¨˜æ†¶ã€‚æƒ³åƒæŠŠé¡æ–™ç‘å‡ºä¾†ï¼Œå¼„å¾—åˆ°è™• (all over) éƒ½æ˜¯ã€‚' },
            { en: 'Friday', zh: 'æ˜ŸæœŸäº” (ã„’ã„§ã„¥ ã„‘ã„§ËŠ ã„¨Ë‡)', mnemonic: '`Friday` (æ˜ŸæœŸäº”) è£¡é¢æœ‰ `fry` (æ²¹ç‚¸)ã€‚æ˜ŸæœŸäº”æ™šä¸Šæœ€é©åˆåƒç‚¸é› (fried chicken) ä¾†æ”¾é¬†ä¸€ä¸‹ï¼' },
            { en: 'frog', zh: 'é’è›™ (ã„‘ã„§ã„¥ ã„¨ã„š)', mnemonic: '`frog` (é’è›™) å¸¸å¸¸è·³åˆ° `rock` (çŸ³é ­) ä¸Šé¢ã€‚' },
            { en: 'grass', zh: 'è‰ (ã„˜ã„ Ë‡)', mnemonic: '`grass` (è‰) å’Œ `glass` (ç»ç’ƒ) å¾ˆåƒã€‚æƒ³åƒä¸€ç‰‡åƒç»ç’ƒä¸€æ¨£ç¿ ç¶ çš„è‰åœ°ã€‚' },
            { en: 'green', zh: 'ç¶ è‰² (ã„Œã„©Ë‹ ã„™ã„œË‹)', mnemonic: '`green` (ç¶ è‰²) è£¡é¢æœ‰ `see` (çœ‹è¦‹)ã€‚æˆ‘å–œæ­¡çœ‹è¦‹ (see) ç¶ è‰² (green) çš„æ¤ç‰©ã€‚' },
            { en: 'end', zh: 'çµæŸ (ã„ã„§ã„ËŠ ã„•ã„¨Ë‹)', mnemonic: '`end` (çµæŸ) é€™å€‹å­—è—åœ¨ `friend` (æœ‹å‹) çš„çµå°¾ã€‚ä¸€æ®µå‹èª¼ä¸æ‡‰è©²è¼•æ˜“çµæŸ (end)ã€‚' },
            { en: 'dirty', zh: 'é«’çš„ (ã„—ã„¤ ã„‰ã„œË™)', mnemonic: '`dirty` (é«’çš„) å°±æ˜¯å……æ»¿äº† `dirt` (æ³¥åœŸ)ã€‚' },
            { en: 'bell', zh: 'éˆ´éº (ã„Œã„§ã„¥ËŠ ã„‰ã„¤)', mnemonic: '`bell` (éˆ´éº) å’Œ `well` (äº•) æŠ¼éŸ»ã€‚æœ‰å€‹éˆ´éº (bell) æ‰åˆ°äº• (well) è£¡äº†ã€‚' },
            { en: 'age', zh: 'å¹´é½¡ (ã„‹ã„§ã„¢ËŠ ã„Œã„§ã„¥ËŠ)', mnemonic: '`age` (å¹´é½¡) å’Œ `cage` (ç± å­) æŠ¼éŸ»ã€‚éš¨è‘—å¹´é½¡ (age) å¢é•·ï¼Œèº«é«”æœ‰æ™‚æœƒæ„Ÿè¦ºåƒè¢«å›°åœ¨ç± å­ (cage) è£¡ã€‚' },
            { en: 'July', zh: 'ä¸ƒæœˆ (ã„‘ã„§ ã„©ã„Ë‹)', mnemonic: '`July` (ä¸ƒæœˆ) è½èµ·ä¾†åƒ "ç å¯¶"(jewel-ry)ã€‚ä¸ƒæœˆæ˜¯è²·ç å¯¶çš„å¥½æ™‚æ©Ÿã€‚' },
            { en: 'text', zh: 'æ–‡å­— (ã„¨ã„£ËŠ ã„—Ë‹)', mnemonic: '`text` (æ–‡å­—) å’Œ `next` (ä¸‹ä¸€å€‹) å¾ˆåƒã€‚è®€å®Œé€™æ®µæ–‡å­— (text)ï¼Œå°±æ›ä¸‹ä¸€å€‹ (next)ã€‚' },
            { en: 'think', zh: 'æ€è€ƒ (ã„™ ã„ã„ Ë‡)', mnemonic: '`think` (æ€è€ƒ) å’Œ `ink` (å¢¨æ°´) å¾ˆåƒã€‚ä½œå®¶ç”¨å¢¨æ°´ (ink) å¯«ä¸‹ä»–å€‘çš„æ€è€ƒ (think)ã€‚' },
            { en: 'around', zh: 'å‘¨åœ (ã„“ã„¡ ã„¨ã„ŸËŠ)', mnemonic: '`around` (å‘¨åœ) è£¡é¢æœ‰ `round` (åœ“çš„)ã€‚ç¹è‘—ä¸€å€‹åœ“åœ“çš„ (round) æ±è¥¿èµ°ä¸€åœˆï¼Œå°±æ˜¯åœ¨å®ƒçš„å‘¨åœ (around)ã€‚' },
            { en: 'another', zh: 'å¦ä¸€å€‹ (ã„Œã„§ã„¥Ë‹ ã„§ËŠ ã„ã„œË‹)', mnemonic: 'æ‹†è§£æˆ `an` (ä¸€å€‹) å’Œ `other` (å…¶ä»–çš„)ã€‚å°±æ˜¯ã€Œå¦ä¸€å€‹ã€(another)ã€‚' },
            { en: 'author', zh: 'ä½œè€… (ã„—ã„¨ã„›Ë‹ ã„“ã„œË‡)', mnemonic: '`author` (ä½œè€…) å’Œ `authority` (æ¬Šå¨) æœ‰å…±åŒçš„å­—æ ¹ã€‚ä¸€ä½ä½œè€… (author) æ˜¯ä»–ä½œå“é ˜åŸŸçš„æ¬Šå¨ã€‚' },
            { en: 'write', zh: 'å¯« (ã„’ã„§ã„Ë‡)', mnemonic: '`write` (å¯«) å’Œ `right` (å³é‚Šçš„; æ­£ç¢ºçš„) ç™¼éŸ³ç›¸åŒã€‚å¤§éƒ¨åˆ†çš„äººç”¨å³æ‰‹ (right hand) ä¾†å¯«å­— (write)ã€‚' },
            { en: 'sleep', zh: 'ç¡è¦º (ã„•ã„¨ã„ŸË‹ ã„ã„§ã„ Ë‹)', mnemonic: '`sleep` (ç¡è¦º) å’Œ `sheep` (ç¾Š) å¾ˆåƒã€‚ç¡ä¸è‘— (can\'t sleep) çš„æ™‚å€™å°±æ•¸ç¶¿ç¾Š (sheep)ã€‚' },
            { en: 'slide', zh: 'æºœæ»‘æ¢¯ (ã„Œã„§ã„¡ ã„ã„¨ã„šËŠ ã„Šã„§)', mnemonic: '`slide` (æ»‘å‹•) çš„ `s` å°±åƒä¸€æ¢å½æ›²çš„æºœæ»‘æ¢¯ï¼Œè®“ä½ æ»‘ (slide) ä¸‹ä¾†ã€‚' },
            { en: 'plate', zh: 'ç›¤å­ (ã„†ã„¢ËŠ ã„—Ë™)', mnemonic: '`plate` (ç›¤å­) å’Œ `late` (é²åˆ°) åªå·®ä¸€å€‹å­—æ¯ã€‚ä½ é²åˆ° (late) äº†ï¼Œæ‰€ä»¥ä½ çš„ç›¤å­ (plate) è£¡ä»€éº¼éƒ½æ²’æœ‰ã€‚' },
            { en: 'play', zh: 'ç© (ã„¨ã„¢ËŠ)', mnemonic: '`play` (ç©) å’Œ `pray` (ç¥ˆç¦±) å¾ˆåƒã€‚ç©æ¨‚ (play) ä¹‹å¾Œï¼Œåˆ¥å¿˜äº†ç¥ˆç¦± (pray)ã€‚' },
            { en: 'kind', zh: 'è¦ªåˆ‡çš„ (ã„‘ã„§ã„£ ã„‘ã„§ã„Ë‹ ã„‰ã„œË™)', mnemonic: 'ä¸€å€‹è¦ªåˆ‡çš„ (kind) äººï¼Œä½ æœƒæŠŠä»–æ”¾åœ¨å¿ƒè£¡ (in your mind - `kind` å’Œ `mind` æŠ¼éŸ»)ã€‚' },
            { en: 'best', zh: 'æœ€å¥½çš„ (ã„—ã„¨ã„ŸË‹ ã„ã„ Ë‡ ã„‰ã„œË™)', mnemonic: '`best` (æœ€å¥½çš„) å’Œ `test` (è€ƒè©¦) æŠ¼éŸ»ã€‚åœ¨è€ƒè©¦ (test) ä¸­æ‹¿åˆ°æœ€å¥½çš„ (best) æˆç¸¾ã€‚' },
            { en: 'cheap', zh: 'ä¾¿å®œçš„ (ã„†ã„§ã„¢ËŠ ã„§ËŠ)', mnemonic: '`cheap` (ä¾¿å®œ) å’Œ `jeep` (å‰æ™®è»Š) æŠ¼éŸ»ã€‚é€™æ˜¯ä¸€å°å¾ˆä¾¿å®œçš„ (cheap) å‰æ™®è»Š (jeep)ã€‚' },
            { en: 'fix', zh: 'ä¿®ç† (ã„’ã„§ã„¡ ã„Œã„§Ë‡)', mnemonic: '`fix` (ä¿®ç†) å’Œ `six` (å…­) å¾ˆåƒã€‚æˆ‘èŠ±äº†å…­ (six) å¡ŠéŒ¢ä¾†ä¿®ç† (fix) é€™å€‹æ±è¥¿ã€‚' },
            { en: 'guy', zh: 'å‚¢ä¼™ (ã„ã„§ã„š ã„ã„¨ã„›Ë™)', mnemonic: '`guy` (å‚¢ä¼™) å’Œ `buy` (è²·) æŠ¼éŸ»ã€‚é‚£å€‹å‚¢ä¼™ (guy) æƒ³è²· (buy) ä»€éº¼ï¼Ÿ' }
        ];

        let currentQuestion = 0;
        let score = 0;
        let totalQuestions = words.length;
        let questions = [];
        let wrongWords = [];
        let isWaitingToContinue = false;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startGame(wordList = words) {
            questions = [...wordList];
            totalQuestions = questions.length;
            shuffle(questions);
            currentQuestion = 0;
            score = 0;
            wrongWords = [];
            isWaitingToContinue = false;
            document.getElementById('restart').style.display = 'none';
            document.getElementById('retest-wrong').style.display = 'none';
            document.getElementById('wrong-words').textContent = '';
            document.getElementById('answer').style.display = 'block';
            document.getElementById('submit').style.display = 'inline-block';
            document.getElementById('submit').textContent = 'æäº¤';
            document.getElementById('game-image').src = 'initial.png';
            nextQuestion();
        }

        function nextQuestion() {
            if (currentQuestion >= totalQuestions) {
                endGame();
                return;
            }
            const mnemonicEl = document.getElementById('mnemonic');
            mnemonicEl.textContent = '';
            mnemonicEl.style.display = 'none';

            isWaitingToContinue = false;
            document.getElementById('submit').textContent = 'æäº¤';
            const q = questions[currentQuestion];
            document.getElementById('question').textContent = `è¼¸å…¥ "${q.zh}" çš„è‹±æ–‡æ‹¼å¯«ï¼š`;
            document.getElementById('answer').value = '';
            document.getElementById('result').textContent = '';
            updateScore();
        }

        function checkAnswer() {
            if (isWaitingToContinue) {
                currentQuestion++;
                nextQuestion();
                return;
            }

            const userAnswer = document.getElementById('answer').value.trim().toLowerCase();
            const q = questions[currentQuestion];
            const correctAnswer = q.en.toLowerCase();

            if (userAnswer === correctAnswer) {
                score++;
                document.getElementById('result').textContent = 'æ­£ç¢ºï¼';
                document.getElementById('result').style.color = 'green';
                document.getElementById('game-image').src = 'correct.png';
                setTimeout(() => {
                    currentQuestion++;
                    nextQuestion();
                }, 1500);
            } else {
                document.getElementById('result').textContent = `éŒ¯èª¤ã€‚æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${q.en}`;
                document.getElementById('result').style.color = 'red';
                document.getElementById('game-image').src = 'incorrect.png';
                
                const mnemonicEl = document.getElementById('mnemonic');
                mnemonicEl.innerHTML = `ğŸ’¡ <b>è¨˜æ†¶æç¤ºï¼š</b>${q.mnemonic}`;
                mnemonicEl.style.display = 'block';
                
                document.getElementById('submit').textContent = 'ç¹¼çºŒ';
                wrongWords.push({ zh: q.zh, en: q.en, user: userAnswer, mnemonic: q.mnemonic });
                isWaitingToContinue = true;
            }
            updateScore();
        }

        function updateScore() {
            document.getElementById('score').textContent = `åˆ†æ•¸: ${score} / ${totalQuestions}`;
        }

        function endGame() {
            document.getElementById('mnemonic').style.display = 'none';
            document.getElementById('question').textContent = 'æ¸¬é©—çµæŸï¼';
            document.getElementById('answer').style.display = 'none';
            document.getElementById('submit').style.display = 'none';
            document.getElementById('result').textContent = `ä½ çš„æœ€çµ‚åˆ†æ•¸ï¼š${score} / ${totalQuestions}`;
            
            if (score === totalQuestions) {
                document.getElementById('game-image').src = 'all_correct.png';
                document.getElementById('wrong-words').textContent = 'å¤ªæ£’äº†ï¼ä½ å…¨éƒ¨ç­”å°ï¼';
            } else {
                document.getElementById('game-image').src = 'not_all_correct.png';
                let wrongText = 'ä½ ç­”éŒ¯çš„å–®å­—ï¼š\n';
                wrongWords.forEach(w => {
                    wrongText += `- ${w.zh}: æ­£ç¢ºç­”æ¡ˆæ˜¯ "${w.en}"ï¼Œä½ è¼¸å…¥ "${w.user}"\n`;
                });
                document.getElementById('wrong-words').textContent = wrongText;
                document.getElementById('retest-wrong').style.display = 'inline-block';
            }
            document.getElementById('restart').style.display = 'inline-block';
        }

        document.getElementById('submit').addEventListener('click', checkAnswer);
        document.getElementById('answer').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkAnswer();
        });
        document.getElementById('restart').addEventListener('click', () => startGame(words));
        document.getElementById('retest-wrong').addEventListener('click', () => {
            if (wrongWords.length > 0) {
                const retestWords = wrongWords.map(w => ({ en: w.en, zh: w.zh, mnemonic: w.mnemonic }));
                startGame(retestWords);
            }
        });

        startGame();
    </script>
</body>
</html>