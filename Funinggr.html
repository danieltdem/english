<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯§å¯§çš„æ–‡æ³•ç‰¹è¨“ï¼šI am / You are (ä¿®æ­£ç‰ˆ)</title>
    <style>
        :root {
            --primary-color: #4A90E2;
            --secondary-color: #F5A623;
            --success-color: #7ED321;
            --error-color: #D0021B;
            --bg-color: #f0f4f8;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background-color: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 600px;
            padding: 30px;
            text-align: center;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        .quiz-area {
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .question-counter {
            font-weight: bold;
            color: #888;
            margin-bottom: 15px;
        }

        /* Answer Drop Zone */
        .answer-box {
            min-height: 60px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            padding: 10px;
            margin-bottom: 20px;
            background-color: #fafafa;
            transition: all 0.3s;
        }

        .answer-box.correct {
            border-color: var(--success-color);
            background-color: #f0fff0;
        }

        .answer-box.wrong {
            border-color: var(--error-color);
            background-color: #fff0f0;
            animation: shake 0.5s;
        }

        /* Word Chips */
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .word-chip {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.2em;
            user-select: none;
            transition: transform 0.2s, background-color 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .word-chip:hover {
            transform: translateY(-2px);
            background-color: #357ABD;
        }

        .word-chip:active {
            transform: scale(0.95);
        }

        /* Buttons */
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            margin: 5px;
        }

        .btn-check {
            background-color: var(--success-color);
            color: white;
        }

        .btn-check:hover {
            background-color: #6dbb1a;
        }

        .btn-reset {
            background-color: #e0e0e0;
            color: #555;
        }

        .btn-reset:hover {
            background-color: #d0d0d0;
        }

        .btn-next {
            background-color: var(--secondary-color);
            color: white;
            display: none; /* Hidden initially */
        }

        .message {
            margin-top: 15px;
            font-size: 1.2em;
            font-weight: bold;
            height: 30px;
        }

        .message.success { color: var(--success-color); }
        .message.error { color: var(--error-color); }

        /* Final Score Screen */
        .score-screen {
            display: none;
            text-align: center;
        }

        .final-score {
            font-size: 3em;
            color: var(--primary-color);
            margin: 20px 0;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        /* Responsive */
        @media (max-width: 480px) {
            .container { padding: 15px; }
            .word-chip { padding: 8px 15px; font-size: 1em; }
        }
    </style>
</head>
<body>

<div class="container">
    <div id="quiz-screen">
        <h1>æ–‡æ³•å¥å­é‡çµ„ç‰¹è¨“</h1>
        <div class="subtitle">ä¸»é¡Œï¼šI am / You are</div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <div class="question-counter" id="counter">Question 1 / 10</div>

        <div class="quiz-area">
            <div>
                <p style="color: #666; margin-bottom: 5px;">è«‹é»æ“Šä¸‹æ–¹çš„å–®å­—ï¼Œçµ„æˆæ­£ç¢ºçš„å¥å­ï¼š</p>
                <div class="answer-box" id="answer-zone">
                    <span style="color: #ccc; pointer-events: none;">(é»æ“Šå–®å­—æ”¾åˆ°é€™è£¡)</span>
                </div>

                <div class="word-bank" id="word-bank">
                    </div>
            </div>

            <div>
                <div class="message" id="message-area"></div>
                <div class="controls">
                    <button class="btn btn-reset" onclick="resetCurrentQuestion()">æ¸…é™¤é‡ä¾†</button>
                    <button class="btn btn-check" id="check-btn" onclick="checkAnswer()">æª¢æŸ¥ç­”æ¡ˆ</button>
                    <button class="btn btn-next" id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ âœ</button>
                </div>
            </div>
        </div>
    </div>

    <div id="score-screen" class="score-screen">
        <h1>è€ƒè©¦çµæŸï¼ğŸ‰</h1>
        <p>å¯§å¯§ï¼Œå¦³é€™æ¬¡çš„æˆç¸¾æ˜¯ï¼š</p>
        <div class="final-score" id="final-score-display">100</div>
        <p id="feedback-text">å¤ªæ£’äº†ï¼å¦³å·²ç¶“å®Œå…¨æŒæ¡äº†ï¼</p>
        <button class="btn btn-check" onclick="location.reload()">å†ç·´ç¿’ä¸€æ¬¡</button>
    </div>
</div>

<script>
    // é¡Œåº«è³‡æ–™ (ä¿®æ­£äº†ç¬¬2é¡Œçš„ "You")
    const questions = [
        {
            id: 1,
            scrambled: ["am", "I", "happy."],
            correct: "I am happy."
        },
        {
            id: 2,
            scrambled: ["are", "You", "tall."], // ä¿®æ­£ï¼šyou -> You
            correct: "You are tall."
        },
        {
            id: 3,
            scrambled: ["am", "student.", "a", "I"],
            correct: "I am a student."
        },
        {
            id: 4,
            scrambled: ["friend.", "my", "You", "are"],
            correct: "You are my friend."
        },
        {
            id: 5,
            scrambled: ["hungry.", "very", "am", "I"],
            correct: "I am very hungry."
        },
        {
            id: 6,
            scrambled: ["beautiful.", "You", "are"],
            correct: "You are beautiful."
        },
        {
            id: 7,
            scrambled: ["years", "I", "old.", "ten", "am"],
            correct: "I am ten years old."
        },
        {
            id: 8,
            scrambled: ["singer.", "a", "are", "good", "You"],
            correct: "You are a good singer."
        },
        {
            id: 9,
            scrambled: ["busy", "am", "I", "now."],
            correct: "I am busy now."
        },
        {
            id: 10,
            scrambled: ["very", "smart.", "You", "are"],
            correct: "You are very smart."
        }
    ];

    let currentQuestionIndex = 0;
    let score = 0;
    let currentAnswerArray = [];

    // DOM Elements
    const wordBankEl = document.getElementById('word-bank');
    const answerZoneEl = document.getElementById('answer-zone');
    const messageEl = document.getElementById('message-area');
    const checkBtn = document.getElementById('check-btn');
    const nextBtn = document.getElementById('next-btn');
    const counterEl = document.getElementById('counter');
    const progressFill = document.getElementById('progress');
    const quizScreen = document.getElementById('quiz-screen');
    const scoreScreen = document.getElementById('score-screen');
    const finalScoreDisplay = document.getElementById('final-score-display');
    const feedbackText = document.getElementById('feedback-text');

    // åˆå§‹åŒ–éŠæˆ²
    function initGame() {
        loadQuestion(currentQuestionIndex);
    }

    // è¼‰å…¥é¡Œç›®
    function loadQuestion(index) {
        // é‡ç½®ç‹€æ…‹
        currentAnswerArray = [];
        messageEl.textContent = '';
        messageEl.className = 'message';
        answerZoneEl.className = 'answer-box';
        answerZoneEl.innerHTML = '<span style="color: #ccc; pointer-events: none;">(é»æ“Šå–®å­—æ”¾åˆ°é€™è£¡)</span>';
        checkBtn.style.display = 'inline-block';
        nextBtn.style.display = 'none';
        
        // æ›´æ–°é€²åº¦æ¢
        counterEl.textContent = `Question ${index + 1} / ${questions.length}`;
        progressFill.style.width = `${((index) / questions.length) * 100}%`;

        // é¡¯ç¤ºäº‚åºå–®å­—
        const q = questions[index];
        renderWordBank(q.scrambled);
    }

    function renderWordBank(words) {
        wordBankEl.innerHTML = '';
        words.forEach((word, idx) => {
            const btn = document.createElement('div');
            btn.className = 'word-chip';
            btn.textContent = word;
            btn.onclick = () => moveWordToAnswer(word, btn);
            wordBankEl.appendChild(btn);
        });
    }

    // å°‡å–®å­—å¾é¡Œåº«ç§»åˆ°ç­”æ¡ˆå€
    function moveWordToAnswer(word, element) {
        if (currentAnswerArray.length === 0) {
            answerZoneEl.innerHTML = '';
        }

        currentAnswerArray.push(word);

        const answerBtn = document.createElement('div');
        answerBtn.className = 'word-chip';
        answerBtn.style.backgroundColor = '#F5A623'; 
        answerBtn.textContent = word;
        answerBtn.onclick = () => moveWordBackToBank(word, answerBtn, element);
        answerZoneEl.appendChild(answerBtn);

        element.style.visibility = 'hidden';
    }

    // å°‡å–®å­—å¾ç­”æ¡ˆå€ç§»å›é¡Œåº«
    function moveWordBackToBank(word, answerElement, originalElement) {
        answerZoneEl.removeChild(answerElement);
        
        const idx = currentAnswerArray.lastIndexOf(word);
        if (idx > -1) {
            currentAnswerArray.splice(idx, 1);
        }

        originalElement.style.visibility = 'visible';

        if (currentAnswerArray.length === 0) {
            answerZoneEl.innerHTML = '<span style="color: #ccc; pointer-events: none;">(é»æ“Šå–®å­—æ”¾åˆ°é€™è£¡)</span>';
        }
    }

    function resetCurrentQuestion() {
        loadQuestion(currentQuestionIndex);
    }

    function checkAnswer() {
        if (currentAnswerArray.length === 0) return;

        const userSentence = currentAnswerArray.join(' ');
        const correctSentence = questions[currentQuestionIndex].correct;

        // åŠ äº†ä¸€å€‹ trim() ç¢ºä¿æ²’æœ‰å¤šé¤˜ç©ºç™½
        if (userSentence.trim() === correctSentence) {
            // Correct
            messageEl.textContent = 'Correct! ç­”å°äº†ï¼ âœ¨';
            messageEl.className = 'message success';
            answerZoneEl.classList.add('correct');
            checkBtn.style.display = 'none';
            nextBtn.style.display = 'inline-block';
            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.textContent = 'æŸ¥çœ‹æˆç¸¾ ğŸ†';
            }
            score += 10;
        } else {
            // Wrong
            messageEl.textContent = 'Try again! å†è©¦ä¸€æ¬¡å–” ğŸ’ª';
            messageEl.className = 'message error';
            answerZoneEl.classList.add('wrong');
            setTimeout(() => {
                answerZoneEl.classList.remove('wrong');
            }, 500);
        }
    }

    function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            loadQuestion(currentQuestionIndex);
        } else {
            showResult();
        }
    }

    function showResult() {
        quizScreen.style.display = 'none';
        scoreScreen.style.display = 'block';
        finalScoreDisplay.textContent = score;
        
        if (score === 100) {
            feedbackText.textContent = "å¤ªå²å®³äº†ï¼å¯§å¯§å¦³æ˜¯æ–‡æ³•å°å¤©æ‰ï¼ ğŸŒŸ";
        } else if (score >= 80) {
            feedbackText.textContent = "åšå¾—å¾ˆå¥½ï¼å·®ä¸€é»é»å°±æ»¿åˆ†äº†ï¼ ğŸ‘";
        } else {
            feedbackText.textContent = "åˆ¥æ°£é¤’ï¼Œå¤šç·´ç¿’å¹¾æ¬¡å°±æœƒè®Šå¼·å–”ï¼ ğŸ’ª";
        }
    }

    initGame();
</script>

</body>
</html>
