<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±æ–‡æ–‡æ³•æ¸¬é©—ï¼šUnit 7 åè©èˆ‡ä»£åè©</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            text-align: center;
            background: white;
            padding: 30px 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 650px;
            transition: all 0.3s ease;
        }
        h1 {
            color: #2c3e50;
            margin-top: 10px;
            margin-bottom: 10px;
            font-size: 26px;
        }
        p {
            color: #666;
            margin-bottom: 20px;
            font-size: 16px;
        }
        #game-image {
            width: 150px; 
            height: 150px; 
            object-fit: contain; 
            margin-bottom: 20px; 
            border-radius: 50%; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); 
            transition: all 0.5s ease;
        }
        #game-status {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.5s ease;
        }
        #game-status.correct {
            background: linear-gradient(135deg, #00b894, #00a085);
            transform: scale(1.1);
        }
        #game-status.incorrect {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            animation: shake 0.5s;
        }
        #game-status.all-correct {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            animation: celebration 1s ease-in-out;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        @keyframes celebration {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(5deg); }
        }
        #progress {
            font-size: 16px;
            color: #555;
            margin-bottom: 15px;
            font-weight: bold;
            padding: 8px 16px;
            background: #f8f9fa;
            border-radius: 20px;
            display: inline-block;
        }
        #question {
            font-size: 22px;
            margin: 20px 0;
            color: #2c3e50;
            line-height: 1.5;
            background: #f1f3f4;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #74b9ff;
            text-align: left;
        }
        #options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
        }
        .option-btn {
            padding: 15px 20px;
            font-size: 18px;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-align: left;
            transform: translateY(0);
        }
        .option-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #0984e3, #74b9ff);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .option-btn.correct {
            background: linear-gradient(135deg, #00b894, #00a085) !important;
            transform: scale(1.02);
        }
        .option-btn.incorrect {
            background: linear-gradient(135deg, #fd79a8, #e84393) !important;
            opacity: 0.7;
        }
        .option-btn:disabled {
            cursor: default;
        }
        #result {
            font-size: 24px;
            margin-top: 20px;
            font-weight: bold;
            padding: 10px;
            border-radius: 8px;
        }
        #explanation-container {
            font-size: 16px;
            margin-top: 15px;
            padding: 20px;
            background: linear-gradient(135deg, #fffbe6, #fff3cd);
            border-left: 5px solid #f39c12;
            border-radius: 10px;
            text-align: left;
            line-height: 1.6;
            color: #5f4c0a;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        #score {
            font-size: 24px;
            margin-top: 10px;
            color: #333;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            font-weight: bold;
        }
        #wrong-questions {
            font-size: 16px;
            margin-top: 20px;
            text-align: left;
            white-space: pre-wrap;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #e74c3c;
            max-height: 300px;
            overflow-y: auto;
            line-height: 1.5;
        }
        #next-btn, #restart-btn, #retest-wrong-btn {
            padding: 15px 30px;
            font-size: 18px;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        #next-btn { 
            background: linear-gradient(135deg, #fdcb6e, #e17055);
        }
        #next-btn:hover { 
            background: linear-gradient(135deg, #e17055, #fdcb6e);
            transform: translateY(-2px);
        }
        #restart-btn { 
            background: linear-gradient(135deg, #00cec9, #00b894);
        }
        #restart-btn:hover { 
            background: linear-gradient(135deg, #00b894, #00cec9);
            transform: translateY(-2px);
        }
        #retest-wrong-btn { 
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
        }
        #retest-wrong-btn:hover { 
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="game-status">ğŸ¯</div>
        <h1>Unit 7ï¼šåè©ã€é‡è©èˆ‡ä»£åè©</h1>
        <p>è«‹æ ¹æ“šå­¸ç¿’å…§å®¹ (å¯æ•¸/ä¸å¯æ•¸ã€Some/Any/No/Everyã€One/Ones) ä½œç­”ã€‚</p>
        
        <div id="quiz-area">
            <div id="progress"></div>
            <div id="question"></div>
            <div id="options-container"></div>
            <div id="result"></div>
            <div id="explanation-container" style="display: none;"></div>
            <button id="next-btn" style="display: none;">ä¸‹ä¸€é¡Œ â¡ï¸</button>
        </div>

        <div id="end-screen" style="display: none;">
            <h2>ğŸŠ æ¸¬é©—çµæŸï¼ ğŸŠ</h2>
            <div id="score"></div>
            <div id="wrong-questions"></div>
            <button id="restart-btn">ğŸ”„ å…¨éƒ¨é‡æ¸¬</button>
            <button id="retest-wrong-btn" style="display: none;">âŒ é‡æ¸¬éŒ¯é¡Œ</button>
        </div>
    </div>

    <script>
        // --- Unit 7 å°ˆå±¬é¡Œåº« (æ ¹æ“šä¸Šå‚³åœ–ç‰‡å…§å®¹è¨­è¨ˆ) ---
        const unit7Questions = [
            // --- Part 1: Plurals (Regular & Irregular) ---
            { question: "Look at the tree! All the _______ are turning brown.", options: ["leaf", "leafs", "leaves", "leafes"], answer: 2, explanation: "å­—å°¾æ˜¯ f æˆ– fe çš„åè©ï¼Œè¤‡æ•¸é€šå¸¸è¦å» f/fe æ”¹æˆ vesã€‚Leaf -> Leavesã€‚" },
            { question: "I need to peel three _______ for the salad.", options: ["potatos", "potatoes", "potato", "potatose"], answer: 1, explanation: "ä»¥ -o çµå°¾çš„åè©ï¼Œè¤‡æ•¸é€šå¸¸åŠ  -esã€‚Potato -> Potatoesã€‚" },
            { question: "The cat is chasing two _______.", options: ["mouses", "mice", "mouse", "mices"], answer: 1, explanation: "Mouse æ˜¯ä¸è¦å‰‡è®ŠåŒ–åè©ï¼Œè¤‡æ•¸æ˜¯ miceã€‚" },
            { question: "She bought two new _______.", options: ["radioes", "radios", "radio", "radio's"], answer: 1, explanation: "Radio é›–ç„¶æ˜¯ o çµå°¾ï¼Œä½†å±¬æ–¼ä¾‹å¤–ï¼Œè¤‡æ•¸åªåŠ  s -> Radiosã€‚" },
            { question: "There are many _______ playing in the park.", options: ["child", "childs", "children", "childrens"], answer: 2, explanation: "Child æ˜¯ä¸è¦å‰‡è®ŠåŒ–åè©ï¼Œè¤‡æ•¸æ˜¯ childrenã€‚" },
            { question: "Foxes and _______ are wild animals.", options: ["wolf", "wolfs", "wolves", "wolvs"], answer: 2, explanation: "Wolf å­—å°¾æ˜¯ fï¼Œè¤‡æ•¸è¦å» f æ”¹ ves -> Wolvesã€‚" },
            { question: "My grandmother keeps five _______ on her farm.", options: ["goose", "geese", "gooses", "geeses"], answer: 1, explanation: "Goose (éµ) æ˜¯ä¸è¦å‰‡è®ŠåŒ–ï¼Œè¤‡æ•¸æ˜¯ geeseã€‚" },
            { question: "Please brush your _______ before going to bed.", options: ["tooth", "toothes", "teeth", "teeths"], answer: 2, explanation: "Tooth æ˜¯ä¸è¦å‰‡è®ŠåŒ–ï¼Œè¤‡æ•¸æ˜¯ teethã€‚" },
            { question: "Look at those _______. They are very strong animals.", options: ["oxes", "ox", "oxen", "oxs"], answer: 2, explanation: "Ox (å…¬ç‰›) æ˜¯ä¸è¦å‰‡è®ŠåŒ–ï¼Œè¤‡æ•¸æ˜¯ oxenã€‚" },
            { question: "There are three _______ on the table.", options: ["dictionarys", "dictionaries", "dictionary", "dictionaris"], answer: 1, explanation: "ä»¥ã€Œå­éŸ³+yã€çµå°¾ï¼Œå» y åŠ  ies -> Dictionariesã€‚" },

            // --- Part 2: Countable vs. Uncountable Nouns ---
            { question: "I need some _______ about the flight times.", options: ["informations", "information", "an information", "inform"], answer: 1, explanation: "Information æ˜¯ä¸å¯æ•¸åè©ï¼Œä¸èƒ½åŠ  sï¼Œä¹Ÿä¸èƒ½åŠ  anã€‚" },
            { question: "Can I have a _______ of bread, please?", options: ["loaf", "slice", "piece", "All of the above"], answer: 3, explanation: "Bread æ˜¯ä¸å¯æ•¸åè©ï¼Œå¯ä»¥ç”¨ a loaf of (ä¸€æ¢), a slice of (ä¸€ç‰‡), a piece of (ä¸€å¡Š) ä¾†è¨ˆç®—ã€‚" },
            { question: "We don't have much _______ left in the fridge.", options: ["milks", "milk", "a milk", "bottle of milk"], answer: 1, explanation: "Milk æ˜¯ä¸å¯æ•¸æ¶²é«”ï¼Œä¸åŠ  sã€‚Much å¾Œé¢æ¥ä¸å¯æ•¸åè©ã€‚" },
            { question: "He gave me some good _______.", options: ["advices", "advice", "an advice", "piece of advices"], answer: 1, explanation: "Advice (å»ºè­°) æ˜¯ä¸å¯æ•¸åè©ï¼Œæ°¸é ç”¨å–®æ•¸å½¢ï¼Œä¸åŠ  sã€‚" },
            { question: "Could you pass me two _______ of water?", options: ["glass", "glasses", "water", "waters"], answer: 1, explanation: "Water ä¸å¯æ•¸ï¼Œè¦æ•¸çš„è©±è¦ç”¨å®¹å™¨ç•¶å–®ä½ï¼štwo glasses of waterã€‚" },

            // --- Part 3: Special Nouns (Police, News, Clothes...) ---
            { question: "The police _______ investigating the crime.", options: ["is", "are", "was", "has"], answer: 1, explanation: "Police (è­¦æ–¹) æ˜¯é›†åˆåè©ï¼Œè¦–ç‚ºè¤‡æ•¸ï¼Œå‹•è©è¦ç”¨ areã€‚" },
            { question: "The news _______ very interesting today.", options: ["are", "is", "were", "have"], answer: 1, explanation: "News (æ–°è) é›–ç„¶æœ‰ sï¼Œä½†è¦–ç‚ºä¸å¯æ•¸å–®æ•¸ï¼Œå‹•è©è¦ç”¨ isã€‚" },
            { question: "Your clothes _______ dirty. Put them in the washing machine.", options: ["is", "are", "was", "has"], answer: 1, explanation: "Clothes (è¡£æœ) ç¸½æ˜¯è¤‡æ•¸ï¼Œå‹•è©ç”¨ areã€‚" },
            { question: "Where _______ my trousers? I can't find them.", options: ["is", "are", "am", "was"], answer: 1, explanation: "Trousers (è¤²å­) æ˜¯è¤‡æ•¸åè©(å…©æ¢è¤²ç®¡)ï¼Œå‹•è©ç”¨ areã€‚" },

            // --- Part 4: Some / Any / No ---
            { question: "I'm thirsty. Can I have _______ water, please?", options: ["any", "some", "no", "a"], answer: 1, explanation: "é›–ç„¶æ˜¯å•å¥ï¼Œä½†é€™æ˜¯ä¸€å€‹ã€Œè«‹æ±‚/è¦æ±‚ã€(Request)ï¼Œå¸Œæœ›å°æ–¹ç­”æ‡‰ï¼Œæ‰€ä»¥ç”¨ someã€‚" },
            { question: "I don't have _______ money in my wallet.", options: ["some", "no", "any", "many"], answer: 2, explanation: "å¦å®šå¥ (don't have) ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ anyã€‚" },
            { question: "There is _______ milk in the fridge. We need to buy more.", options: ["any", "no", "some", "a"], answer: 1, explanation: "å¥æ„æ˜¯ã€Œæ²’æœ‰ç‰›å¥¶äº†ï¼Œè¦å»è²·ã€ï¼Œä¸”å‹•è©æ˜¯è‚¯å®š (is)ï¼Œæ‰€ä»¥ç”¨ no (= not any)ã€‚" },
            { question: "Are there _______ students in the classroom?", options: ["some", "any", "no", "much"], answer: 1, explanation: "ä¸€èˆ¬ç–‘å•å¥ä¸­ï¼Œä½¿ç”¨ anyã€‚" },
            { question: "Would you like _______ coffee?", options: ["any", "no", "some", "every"], answer: 2, explanation: "æä¾›å°æ–¹æ±è¥¿ (Offer) æ™‚ï¼Œç‚ºäº†è¡¨ç¤ºç¦®è²Œä¸¦æœŸå¾…è‚¯å®šå›ç­”ï¼Œä½¿ç”¨ someã€‚" },
            { question: "He has _______ friends in this city; he feels lonely.", options: ["no", "any", "some", "every"], answer: 0, explanation: "å¥æ„æ˜¯ã€Œä»–æ„Ÿåˆ°å¯‚å¯ã€ï¼Œè¡¨ç¤ºä»–ã€Œæ²’æœ‰ã€æœ‹å‹ã€‚å‹•è© has æ˜¯è‚¯å®šï¼Œæ•…æ­é… noã€‚" },

            // --- Part 5: Compounds (Someone, Anything, Nowhere...) ---
            { question: "Is there _______ in the box? No, it's empty.", options: ["something", "anything", "nothing", "everything"], answer: 1, explanation: "ç–‘å•å¥ç”¨ anythingã€‚" },
            { question: "_______ is taking my umbrella! Hey, stop!", options: ["Anybody", "Somebody", "Nobody", "Any"], answer: 1, explanation: "è‚¯å®šå¥ï¼ŒæŒ‡ã€ŒæŸå€‹äººã€æ­£åœ¨æ‹¿é›¨å‚˜ï¼Œç”¨ Somebodyã€‚" },
            { question: "I have _______ to wear for the party. All my clothes are dirty.", options: ["something", "nothing", "anything", "everything"], answer: 1, explanation: "å‹•è©æ˜¯è‚¯å®š (have)ï¼Œä½†å¥æ„æ˜¯è² é¢çš„ (æ²’è¡£æœç©¿)ï¼Œæ‰€ä»¥ç”¨ nothing (= don't have anything)ã€‚" },
            { question: "_______ loves ice cream! It's so popular.", options: ["Someone", "Anyone", "Everybody", "Nobody"], answer: 2, explanation: "å¥æ„æ˜¯æŒ‡ã€Œæ¯å€‹äººã€éƒ½å–œæ­¡ï¼Œç”¨ Everybodyã€‚" },
            { question: "I can't find my keys _______. I've looked everywhere.", options: ["somewhere", "nowhere", "anywhere", "everywhere"], answer: 2, explanation: "å¦å®šå¥ (can't find) ä¸­ï¼Œä½¿ç”¨ anywhereã€‚" },
            { question: "Did you go _______ interesting last summer?", options: ["somewhere", "anywhere", "nowhere", "everywhere"], answer: 1, explanation: "ç–‘å•å¥å•æœ‰æ²’æœ‰å»ã€Œä»»ä½•ã€åœ°æ–¹ï¼Œç”¨ anywhereã€‚" },

            // --- Part 6: Grammar Rules for Compounds (Singular verbs / Adjectives) ---
            { question: "Everyone _______ ready for the test.", options: ["are", "is", "were", "have"], answer: 1, explanation: "Every- é–‹é ­çš„è¤‡åˆå­— (Everyone, Everybody, Everything) è¦–ç‚ºå–®æ•¸ï¼Œå‹•è©ç”¨ isã€‚" },
            { question: "Nobody in my family _______ football.", options: ["like", "likes", "liking", "are like"], answer: 1, explanation: "Nobody è¦–ç‚ºå–®æ•¸ï¼Œç¾åœ¨ç°¡å–®å¼å‹•è©è¦åŠ  s -> likesã€‚" },
            { question: "I want to buy something _______.", options: ["cheap", "cheaply", "cheaper", "cheapest"], answer: 0, explanation: "å½¢å®¹è©ä¿®é£¾è¤‡åˆä»£åè© (something) æ™‚ï¼Œè¦æ”¾åœ¨å¾Œé¢ï¼šsomething cheapã€‚" },
            { question: "Is _______ hungry? Dinner is ready.", options: ["anyone", "some", "all", "they"], answer: 0, explanation: "ç–‘å•å¥è©¢å•ã€Œä»»ä½•äººã€ï¼Œä¸”å‹•è©æ˜¯ Is (å–®æ•¸)ï¼Œç”¨ anyoneã€‚" },

            // --- Part 7: Every ---
            { question: "Every dog _______ four legs.", options: ["have", "has", "having", "are having"], answer: 1, explanation: "Every + å–®æ•¸åè© (dog)ï¼Œå‹•è©è¦ç”¨å–®æ•¸ hasã€‚" },
            { question: "I visit my grandparents every _______.", options: ["weeks", "week", "weekend", "Sundays"], answer: 1, explanation: "Every å¾Œé¢æ¥å–®æ•¸å¯æ•¸åè©ï¼ševery week / every weekendã€‚" },

            // --- Part 8: One / Ones ---
            { question: "I don't like the green apple. I want the red _______.", options: ["one", "ones", "it", "apple"], answer: 0, explanation: "ä»£æ›¿å‰é¢æéçš„å–®æ•¸å¯æ•¸åè© (apple)ï¼Œç”¨ oneã€‚" },
            { question: "These shoes are old. I need to buy new _______.", options: ["one", "ones", "them", "pair"], answer: 1, explanation: "ä»£æ›¿å‰é¢æéçš„è¤‡æ•¸åè© (shoes)ï¼Œç”¨ onesã€‚" },
            { question: "Which bag is yours? The blue _______.", options: ["one", "ones", "it", "bag"], answer: 0, explanation: "ä»£æ›¿å–®æ•¸åè© bagï¼Œç”¨ oneã€‚" },
            { question: "Do you like the black coat or the brown coat? I like the black _______.", options: ["one", "ones", "coat", "it"], answer: 0, explanation: "é¿å…é‡è¤‡ coatï¼Œå–®æ•¸ç”¨ oneã€‚" }
        ];

        // å®£å‘ŠéŠæˆ²æœƒç”¨åˆ°çš„è®Šæ•¸
        let currentQuestionIndex = 0;
        let score = 0;
        let questions = [];
        let wrongQuestions = [];

        // å–å¾— HTML é é¢ä¸Šçš„å„å€‹å…ƒç´ 
        const quizArea = document.getElementById('quiz-area');
        const endScreen = document.getElementById('end-screen');
        const questionEl = document.getElementById('question');
        const optionsContainer = document.getElementById('options-container');
        const resultEl = document.getElementById('result');
        const explanationEl = document.getElementById('explanation-container');
        const progressEl = document.getElementById('progress');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const retestWrongBtn = document.getElementById('retest-wrong-btn');
        const gameStatus = document.getElementById('game-status');

        // æ‰“äº‚é¡Œç›®é †åºçš„å‡½å¼
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // é–‹å§‹éŠæˆ²çš„å‡½å¼
        function startGame(questionList) {
            questions = JSON.parse(JSON.stringify(questionList)); // Deep copy to avoid modifying original
            shuffle(questions);
            currentQuestionIndex = 0;
            score = 0;
            wrongQuestions = [];
            
            quizArea.style.display = 'block';
            endScreen.style.display = 'none';
            gameStatus.textContent = 'ğŸ¯';
            gameStatus.className = '';
            
            showQuestion();
        }

        // é¡¯ç¤ºä¸€é“é¡Œç›®çš„å‡½å¼
        function showQuestion() {
            resetState();
            const currentQuestion = questions[currentQuestionIndex];
            progressEl.textContent = `ç¬¬ ${currentQuestionIndex + 1} / ${questions.length} é¡Œ`;
            questionEl.textContent = currentQuestion.question;

            currentQuestion.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('option-btn');
                button.dataset.index = index;
                button.addEventListener('click', selectAnswer);
                optionsContainer.appendChild(button);
            });
        }

        // é‡ç½®ç•«é¢ç‹€æ…‹çš„å‡½å¼ (æ›åˆ°ä¸‹ä¸€é¡Œå‰)
        function resetState() {
            resultEl.textContent = '';
            explanationEl.style.display = 'none';
            nextBtn.style.display = 'none';
            while (optionsContainer.firstChild) {
                optionsContainer.removeChild(optionsContainer.firstChild);
            }
            gameStatus.textContent = 'ğŸ¯';
            gameStatus.className = '';
        }

        // é¸æ“‡ç­”æ¡ˆæ™‚è§¸ç™¼çš„å‡½å¼
        function selectAnswer(e) {
            const selectedBtn = e.target;
            const selectedIndex = parseInt(selectedBtn.dataset.index);
            const currentQuestion = questions[currentQuestionIndex];
            const correctIndex = currentQuestion.answer;

            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = true;
            });

            if (selectedIndex === correctIndex) {
                score++;
                selectedBtn.classList.add('correct');
                resultEl.textContent = 'âœ… æ­£ç¢ºï¼å¤ªæ£’äº†ï¼';
                resultEl.style.color = '#2ecc71';
                gameStatus.textContent = 'ğŸ‰';
                gameStatus.classList.add('correct');
                
                // ç­”å°å¾Œè‡ªå‹•è·³è½‰ (ç¸®çŸ­æ™‚é–“ä»¥ä¿æŒç¯€å¥)
                setTimeout(() => {
                    currentQuestionIndex++;
                    if (currentQuestionIndex < questions.length) {
                        showQuestion();
                    } else {
                        endGame();
                    }
                }, 1200);
            } else {
                selectedBtn.classList.add('incorrect');
                optionsContainer.children[correctIndex].classList.add('correct');
                resultEl.textContent = 'âŒ ç­”éŒ¯äº†ï¼Œå†æ¥å†å²ï¼';
                resultEl.style.color = '#e74c3c';
                gameStatus.textContent = 'ğŸ˜…';
                gameStatus.classList.add('incorrect');
                
                explanationEl.textContent = `ğŸ’¡ æ–‡æ³•è§£æï¼š${currentQuestion.explanation}`;
                explanationEl.style.display = 'block';

                wrongQuestions.push({
                    ...currentQuestion,
                    userAnswer: currentQuestion.options[selectedIndex]
                });
                nextBtn.style.display = 'block'; // ç­”éŒ¯æ™‚æ‰é¡¯ç¤ºã€Œä¸‹ä¸€é¡Œã€æŒ‰éˆ•
            }
        }

        // éŠæˆ²çµæŸæ™‚å‘¼å«çš„å‡½å¼
        function endGame() {
            quizArea.style.display = 'none';
            endScreen.style.display = 'block';
            
            const scoreEl = document.getElementById('score');
            scoreEl.textContent = `ğŸ¯ ä½ çš„æœ€çµ‚åˆ†æ•¸ï¼š${score} / ${questions.length} (${Math.round(score/questions.length*100)}%)`;

            const wrongQuestionsEl = document.getElementById('wrong-questions');
            if (score === questions.length) {
                gameStatus.textContent = 'ğŸ†';
                gameStatus.classList.add('all-correct');
                wrongQuestionsEl.textContent = 'ğŸŠ å¤ªæ£’äº†ï¼ä½ å…¨éƒ¨ç­”å°äº†ï¼ä½ å·²ç¶“å®Œå…¨æŒæ¡ Unit 7 çš„å…§å®¹ï¼ ğŸŠ';
                wrongQuestionsEl.style.borderLeftColor = '#2ecc71';
                wrongQuestionsEl.style.background = '#d4edda';
                wrongQuestionsEl.style.color = '#155724';
                wrongQuestionsEl.style.display = 'block';
                retestWrongBtn.style.display = 'none';
            } else {
                gameStatus.textContent = 'ğŸ“';
                let wrongText = 'ğŸ“‹ ä½ ç­”éŒ¯çš„é¡Œç›®å›é¡§ï¼š\n\n';
                wrongQuestions.forEach((q, index) => {
                    wrongText += `${index + 1}. ${q.question}\n`;
                    wrongText += `    ä½ çš„ç­”æ¡ˆ: "${q.userAnswer}" âŒ\n`;
                    wrongText += `    æ­£ç¢ºç­”æ¡ˆ: "${q.options[q.answer]}" âœ…\n`;
                    wrongText += `    è§£æ: ${q.explanation}\n\n`;
                });
                wrongQuestionsEl.textContent = wrongText;
                wrongQuestionsEl.style.borderLeftColor = '#e74c3c';
                wrongQuestionsEl.style.background = '#f8d7da';
                wrongQuestionsEl.style.color = '#721c24';
                wrongQuestionsEl.style.display = 'block';
                retestWrongBtn.style.display = 'inline-block';
            }
        }
        
        // é»æ“Šã€Œä¸‹ä¸€é¡Œã€æŒ‰éˆ•
        nextBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                endGame();
            }
        });

        // é»æ“Šã€Œå…¨éƒ¨é‡æ¸¬ã€æŒ‰éˆ•
        restartBtn.addEventListener('click', () => startGame(unit7Questions));

        // é»æ“Šã€Œé‡æ¸¬éŒ¯é¡Œã€æŒ‰éˆ•
        retestWrongBtn.addEventListener('click', () => {
            if (wrongQuestions.length > 0) {
                // åªå–é¡Œç›®è³‡æ–™ï¼Œç§»é™¤ä¸Šæ¬¡çš„ä½¿ç”¨è€…ç­”æ¡ˆ
                const retestList = wrongQuestions.map(({ userAnswer, ...rest }) => rest);
                startGame(retestList);
            }
        });

        // ç¶²é è¼‰å…¥å¾Œï¼Œè‡ªå‹•é–‹å§‹éŠæˆ²
        startGame(unit7Questions);
    </script>
</body>
</html>
