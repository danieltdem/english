<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯§å¯§çš„ Present Perfect çµ‚æ¥µæ¨¡æ“¬è€ƒ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            color: #333;
            display: flex;
            justify-content: center;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            background-color: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1em;
            font-weight: bold;
        }
        .rule-box {
            background-color: #e8f6f3;
            border-left: 5px solid #1abc9c;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 4px;
        }
        .rule-title {
            font-weight: bold;
            color: #16a085;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        .question-card {
            background-color: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            position: relative;
            transition: transform 0.2s;
        }
        .question-card:hover {
            border-color: #bdc3c7;
        }
        .question-badge {
            position: absolute;
            top: -12px;
            left: 20px;
            background-color: #3498db;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .prompt {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
            margin-top: 10px;
            color: #2c3e50;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }
        .input-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 700;
        }
        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1em;
            transition: border-color 0.3s;
            box-sizing: border-box;
        }
        input[type="text"]:focus {
            border-color: #3498db;
            outline: none;
            background-color: #fafdff;
        }
        .btn-check {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s;
            display: block;
            width: 100%;
            font-weight: bold;
        }
        .btn-check:hover {
            background-color: #2980b9;
        }
        .btn-check:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .feedback.correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .feedback.incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .answer-key {
            margin-top: 10px;
            font-size: 1em;
            color: #333;
            background-color: rgba(255,255,255,0.5);
            padding: 10px;
            border-radius: 4px;
        }
        .score-board {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            background-color: #2c3e50;
            color: white;
            border-radius: 10px;
            font-size: 1.5em;
            font-weight: bold;
        }
        .progress-bar {
            height: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: #2ecc71;
            width: 0%;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Present Perfect Simple çµ‚æ¥µæ¨¡æ“¬è€ƒ</h1>
    <div class="subtitle">ç‚ºå¯§å¯§è¨­è¨ˆçš„å°ˆå±¬æ–‡æ³•æ¸¬é©— (å…±15é¡Œ)</div>

    <div class="rule-box">
        <div class="rule-title">ğŸ“ è€å¸«çš„å°å®åš€ï¼š</div>
        <ul style="margin:0; padding-left:20px;">
            <li><b>å£è¨£ï¼š</b> <code>Have/Has</code> + <code>V3 (éå»åˆ†è©)</code></li>
            <li><b>æ³¨æ„äººç¨±ï¼š</b> I, You, We, They ç”¨ <b>Have</b>ï¼›He, She, It, Name ç”¨ <b>Has</b>ã€‚</li>
            <li><b>å›ç­”æ ¼å¼ï¼š</b> å•å¥ -> ç°¡çŸ­å¦å®š -> å®Œæ•´è‚¯å®šè©³ç­”ã€‚</li>
            <li><b>æ¨™é»ç¬¦è™Ÿï¼š</b> å¥å°¾çš„å•è™Ÿ <code>?</code> å’Œå¥è™Ÿ <code>.</code> åƒè¬ä¸èƒ½æ¼æ‰ï¼</li>
            <li><b>é™·é˜±ï¼š</b> é¡Œç›®æ˜¯ "You" æ™‚ï¼Œå›ç­”è¦è¨˜å¾—æ”¹æˆ "I"ã€‚</li>
        </ul>
        <br>
        <small style="color: #555;">ç¯„ä¾‹ï¼š<br>
        é¡Œç›®ï¼šShane/ buy/ any shoes (buy a TV)<br>
        å•å¥ï¼šHas Shane bought any shoes?<br>
        ç­”å¥ï¼šNo, he hasn't. He has bought a TV.</small>
    </div>

    <div id="quiz-container">
        </div>

    <div class="score-board">
        ç›®å‰å¾—åˆ†ï¼š <span id="current-score">0</span> / <span id="total-questions">0</span>
        <div class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
        </div>
    </div>
</div>

<script>
    // å®Œæ•´ 15 é¡Œé¡Œåº«
    const questions = [
        // åŸºç¤é¡Œ
        {
            id: 1,
            prompt: "Shane/ buy/ any shoes/ this month (buy a TV)",
            expectedQ: "Has Shane bought any shoes this month?",
            expectedA: "No, he hasn't. He has bought a TV."
        },
        {
            id: 2,
            prompt: "They/ visit/ London/ yet (visit Paris)",
            expectedQ: "Have they visited London yet?",
            expectedA: "No, they haven't. They have visited Paris."
        },
        {
            id: 3,
            prompt: "Your sister/ finish/ her homework (clean her room)",
            expectedQ: "Has your sister finished her homework?",
            expectedA: "No, she hasn't. She has cleaned her room."
        },
        {
            id: 4,
            prompt: "Tom and Jerry/ wash/ the car (wash the dog)",
            expectedQ: "Have Tom and Jerry washed the car?",
            expectedA: "No, they haven't. They have washed the dog."
        },
        {
            id: 5,
            prompt: "You/ see/ that movie (read the book)",
            expectedQ: "Have you seen that movie?",
            expectedA: "No, I haven't. I have read the book."
        },
        // é€²éšé¡Œ (åŒ…å«ä¸è¦å‰‡å‹•è©)
        {
            id: 6,
            prompt: "The baby/ eat/ his dinner (eat a cookie)",
            expectedQ: "Has the baby eaten his dinner?",
            expectedA: "No, he hasn't. He has eaten a cookie."
        },
        {
            id: 7,
            prompt: "We/ write/ the report/ yet (write the email)",
            expectedQ: "Have we written the report yet?",
            expectedA: "No, we haven't. We have written the email."
        },
        {
            id: 8,
            prompt: "Your parents/ go/ to Japan (go to Korea)",
            expectedQ: "Have your parents gone to Japan?",
            expectedA: "No, they haven't. They have gone to Korea."
        },
        {
            id: 9,
            prompt: "It/ rain/ today (snow)",
            expectedQ: "Has it rained today?",
            expectedA: "No, it hasn't. It has snowed."
        },
        {
            id: 10,
            prompt: "She/ drink/ her milk (drink juice)",
            expectedQ: "Has she drunk her milk?",
            expectedA: "No, she hasn't. She has drunk juice."
        },
        {
            id: 11,
            prompt: "You/ find/ your keys (find my phone)",
            expectedQ: "Have you found your keys?",
            expectedA: "No, I haven't. I have found my phone."
        },
        {
            id: 12,
            prompt: "John/ break/ his arm (break his leg)",
            expectedQ: "Has John broken his arm?",
            expectedA: "No, he hasn't. He has broken his leg."
        },
        {
            id: 13,
            prompt: "The teacher/ speak/ to you (speak to him)",
            expectedQ: "Has the teacher spoken to you?",
            expectedA: "No, she hasn't. She has spoken to him." 
        },
        {
            id: 14,
            prompt: "They/ swim/ in the river (swim in the pool)",
            expectedQ: "Have they swum in the river?",
            expectedA: "No, they haven't. They have swum in the pool."
        },
        {
            id: 15,
            prompt: "You/ take/ the photo/ yet (take a video)",
            expectedQ: "Have you taken the photo yet?",
            expectedA: "No, I haven't. I have taken a video."
        }
    ];

    let score = 0;

    // åˆå§‹åŒ–æ¸¬é©—
    function initQuiz() {
        const container = document.getElementById('quiz-container');
        document.getElementById('total-questions').innerText = questions.length;

        questions.forEach((q, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.innerHTML = `
                <div class="question-badge">Question ${index + 1}</div>
                <div class="prompt">ğŸ¤Ÿ ${q.prompt}</div>
                
                <div class="input-group">
                    <label>å¯«å‡ºå•å¥ (Question):</label>
                    <input type="text" id="q-${q.id}" placeholder="Type the question here..." autocomplete="off">
                </div>
                
                <div class="input-group">
                    <label>å¯«å‡ºç­”å¥ (Answer):</label>
                    <input type="text" id="a-${q.id}" placeholder="Type the answer here..." autocomplete="off">
                </div>

                <button class="btn-check" onclick="checkAnswer(${q.id})">Check Answer</button>
                
                <div id="feedback-${q.id}" class="feedback"></div>
            `;
            container.appendChild(card);
        });
    }

    // æ¸…ç†å­—ä¸²åŠŸèƒ½ï¼ˆç§»é™¤å‰å¾Œç©ºç™½ï¼Œå°‡å¤šç¨®å¼•è™Ÿæ¨™æº–åŒ–ï¼Œè™•ç†å¤šé¤˜ç©ºæ ¼ï¼‰
    function cleanString(str) {
        return str.trim()
                  .replace(/\s+/g, ' ')  // æŠŠå¤šå€‹ç©ºç™½è®Šæˆä¸€å€‹
                  .replace(/[â€™â€˜]/g, "'") // è™•ç†ä¸­æ–‡æˆ–ç‰¹æ®Šå¼•è™Ÿ
                  .replace(/[ï¼Œ]/g, ",") // è™•ç†ä¸­æ–‡é€—è™Ÿ
                  .replace(/[ï¼Ÿ]/g, "?") // è™•ç†ä¸­æ–‡å•è™Ÿ
                  .replace(/[ã€‚]/g, "."); // è™•ç†ä¸­æ–‡å¥è™Ÿ
    }

    // æª¢æŸ¥ç­”æ¡ˆé‚è¼¯
    function checkAnswer(id) {
        const questionObj = questions.find(q => q.id === id);
        
        // å–å¾—ä½¿ç”¨è€…è¼¸å…¥ä¸¦æ¸…ç†
        const userQ = cleanString(document.getElementById(`q-${id}`).value);
        const userA = cleanString(document.getElementById(`a-${id}`).value);
        
        const feedbackDiv = document.getElementById(`feedback-${id}`);
        const btn = document.querySelector(`button[onclick="checkAnswer(${id})"]`);

        // æ¯”å°é‚è¼¯ (å¿½ç•¥å¤§å°å¯«)
        const isQCorrect = userQ.toLowerCase() === questionObj.expectedQ.toLowerCase();
        const isACorrect = userA.toLowerCase() === questionObj.expectedA.toLowerCase();

        if (isQCorrect && isACorrect) {
            feedbackDiv.className = "feedback correct";
            feedbackDiv.innerHTML = "<strong>âœ… å¤ªæ£’äº†ï¼å®Œå…¨æ­£ç¢ºï¼(Correct!)</strong>";
            feedbackDiv.style.display = "block";
            
            // é¿å…é‡è¤‡åŠ åˆ†
            if (!btn.disabled) {
                score++;
                updateScore();
            }
            btn.disabled = true; // ç­”å°å¾Œé–å®šæŒ‰éˆ•
            btn.innerText = "Completed";
            btn.style.backgroundColor = "#27ae60";

        } else {
            feedbackDiv.className = "feedback incorrect";
            let msg = "<strong>âŒ å·®ä¸€é»é»å–”ï¼è«‹æª¢æŸ¥ä¸€ä¸‹ï¼š</strong><ul style='margin-top:5px; margin-bottom:10px;'>";
            
            if (!isQCorrect) {
                msg += `<li>å•å¥ (Question) æœ‰éŒ¯èª¤ã€‚</li>`;
            }
            if (!isACorrect) {
                msg += `<li>ç­”å¥ (Answer) æœ‰éŒ¯èª¤ã€‚</li>`;
            }
            msg += "</ul>";

            msg += `<div class="answer-key">
                        <strong>æ­£ç¢ºå•å¥ï¼š</strong> ${questionObj.expectedQ}<br>
                        <strong>æ­£ç¢ºç­”å¥ï¼š</strong> ${questionObj.expectedA}
                    </div>`;
            
            feedbackDiv.innerHTML = msg;
            feedbackDiv.style.display = "block";
        }
    }

    function updateScore() {
        document.getElementById('current-score').innerText = score;
        const percentage = (score / questions.length) * 100;
        document.getElementById('progress-fill').style.width = percentage + "%";
    }

    // å•Ÿå‹•
    initQuiz();
</script>

</body>
</html>
