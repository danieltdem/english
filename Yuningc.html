<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>《戴斗笠的地藏》核心洞察深度測驗</title>
    <style>
        :root {
            --primary-color: #5D4037; /* Earthy brown for the folk tale feel */
            --secondary-color: #EFEBE9; /* Soft paper color */
            --accent-color: #FF7043; /* Warmth/Fire color */
            --success-color: #2E7D32;
            --error-color: #C62828;
            --text-color: #333;
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: #f4f7f6;
            background-image: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 20px;
        }

        h1 {
            color: var(--primary-color);
            font-size: 2.2rem;
        }

        p.intro {
            color: #666;
            font-style: italic;
        }

        .question-card {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            transition: transform 0.2s;
        }

        .question-card:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-color: var(--primary-color);
        }

        .question-title {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .options-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-label {
            display: flex;
            align-items: flex-start;
            cursor: pointer;
            padding: 10px;
            border-radius: 5px;
            background-color: var(--secondary-color);
            transition: background-color 0.2s;
        }

        .option-label:hover {
            background-color: #d7ccc8;
        }

        input[type="checkbox"] {
            margin-top: 5px;
            margin-right: 12px;
            transform: scale(1.2);
        }

        .submit-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 30px;
        }

        .submit-btn:hover {
            background-color: #3E2723;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
            font-size: 0.95rem;
        }

        .feedback.correct {
            background-color: #e8f5e9;
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .feedback.incorrect {
            background-color: #ffebee;
            color: var(--error-color);
            border: 1px solid var(--error-color);
        }

        .explanation {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #555;
            border-top: 1px dashed #ccc;
            padding-top: 10px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>《戴斗笠的地藏》深度測驗</h1>
        <p class="intro">請注意：本測驗為高難度複選題。每個題目至少有兩個正確答案，請仔細閱讀文本細節後作答。</p>
    </header>

    <form id="quizForm">

        <div class="question-card" id="q1">
            <div class="question-title">1. 關於文本中提及的「核心價值觀」與「深層寓意」，下列哪些敘述是完全正確的？</div>
            <div class="options-group">
                <label class="option-label"><input type="checkbox" name="q1" value="A"> A. 故事有兩個核心價值：一是顯著的「善有善報」因果論，二是家庭內部的「知足」與「互相體諒」。</label>
                <label class="option-label"><input type="checkbox" name="q1" value="B"> B. 故事強調老夫妻透過不斷的宗教儀式祈求，才獲得了地藏菩薩的物質回報。</label>
                <label class="option-label"><input type="checkbox" name="q1" value="C"> C. 故事最溫暖的部分在於老婆婆對生意失敗的丈夫不但沒有責備，反而給予精神支持。</label>
                <label class="option-label"><input type="checkbox" name="q1" value="D"> D. 文本指出家人間的善良品格與相互支持，其價值超越了金錢與物質財富。</label>
                <label class="option-label"><input type="checkbox" name="q1" value="E"> E. 故事的主要寓意在於教導人們如何製作斗笠並在市場上進行有效的商業交易。</label>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="q2">
            <div class="question-title">2. 根據「故事架構與情節」的描述，下列關於老爺爺與地藏菩薩互動的細節，哪些符合文本內容？</div>
            <div class="options-group">
                <label class="option-label"><input type="checkbox" name="q2" value="A"> A. 老爺爺在返家途中看見六尊地藏菩薩，原本打算賣出的斗笠一頂也沒賣掉，便決定送給菩薩。</label>
                <label class="option-label"><input type="checkbox" name="q2" value="B"> B. 因為斗笠只有五頂，不足以覆蓋所有菩薩，老爺爺選擇忽略最後一尊菩薩。</label>
                <label class="option-label"><input type="checkbox" name="q2" value="C"> C. 老爺爺解下了自己的頭巾，戴在最後一尊地藏菩薩的頭上，展現了無私的善行。</label>
                <label class="option-label"><input type="checkbox" name="q2" value="D"> D. 這一連串的善舉發生在老爺爺生意失敗、沒能賺到錢買年糕的背景之下。</label>
                <label class="option-label"><input type="checkbox" name="q2" value="E"> E. 老爺爺下山的初衷是為了變賣家中多餘的物資來換取新年的裝飾品。</label>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="q3">
            <div class="question-title">3. 關於文本中的「關鍵詞彙解析」與「形近字辨析」，下列配對與解釋哪些是正確的？</div>
            <div class="options-group">
                <label class="option-label"><input type="checkbox" name="q3" value="A"> A. 「茫」（ㄇㄤˊ）：形容廣大、不清楚的樣子。</label>
                <label class="option-label"><input type="checkbox" name="q3" value="B"> B. 「貧」（ㄆㄧㄣˊ）意指生活窮困，而其形近字「貪」（ㄊㄢ）則意指不知足。</label>
                <label class="option-label"><input type="checkbox" name="q3" value="C"> C. 「繼」（ㄐㄧˋ）的意思是分開、距離，而「斷」（ㄉㄨㄢˋ）的意思是接連不斷。</label>
                <label class="option-label"><input type="checkbox" name="q3" value="D"> D. 「宜」（ㄧˊ）：意思包括合適、價格低廉。</label>
                <label class="option-label"><input type="checkbox" name="q3" value="E"> E. 「納」（ㄋㄚˋ）：僅指繳納稅金，文本中無接受或享受之意。</label>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="q4">
            <div class="question-title">4. 針對重要句型「不但……反而……」的修辭分析，下列哪些理解是正確的？</div>
            <div class="options-group">
                <label class="option-label"><input type="checkbox" name="q4" value="A"> A. 這是一個「轉折複句」，用來表達後續結果與預期情況相反，且程度更進一步。</label>
                <label class="option-label"><input type="checkbox" name="q4" value="B"> B. 課文例句「老婆婆不但沒有怪他，反而認為他做了好事」體現了老婆婆超乎常人的包容與善良。</label>
                <label class="option-label"><input type="checkbox" name="q4" value="C"> C. 此句型通常用於描述兩件平行且不相關的事件同時發生。</label>
                <label class="option-label"><input type="checkbox" name="q4" value="D"> D. 應用範例「弟弟打破花瓶，不但沒有隱瞞，反而主動向媽媽認錯」正確使用了此句型。</label>
                <label class="option-label"><input type="checkbox" name="q4" value="E"> E. 在文本中，此句型是用來強調老爺爺賣不出斗笠的悲慘遭遇。</label>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="q5">
            <div class="question-title">5. 關於故事結局（Result）的描述，下列哪些細節精確符合文本？</div>
            <div class="options-group">
                <label class="option-label"><input type="checkbox" name="q5" value="A"> A. 事件發生在除夕半夜，屋外傳來了奇特的歌聲。</label>
                <label class="option-label"><input type="checkbox" name="q5" value="B"> B. 老夫妻一開門就看見六位地藏菩薩站在門口親手將禮物交給他們。</label>
                <label class="option-label"><input type="checkbox" name="q5" value="C"> C. 隔天清晨發現的物資包括米、青菜、魚和年糕。</label>
                <label class="option-label"><input type="checkbox" name="q5" value="D"> D. 老夫妻看見遠處有六尊身影，頭上戴著斗笠和頭巾，漸漸消失在雪地中。</label>
                <label class="option-label"><input type="checkbox" name="q5" value="E"> E. 結局證明了「心存善念，樂於助人，自然能夠得到好的結局」的中心思想。</label>
            </div>
            <div class="feedback"></div>
        </div>

        <button type="button" class="submit-btn" onclick="checkAnswers()">提交測驗答案</button>

    </form>
</div>

<script>
    function checkAnswers() {
        // Answer Key
        const answers = {
            q1: ['A', 'C', 'D'],
            q2: ['A', 'C', 'D'],
            q3: ['A', 'B', 'D'],
            q4: ['A', 'B', 'D'],
            q5: ['A', 'C', 'D', 'E']
        };

        // Explanations for feedback
        const explanations = {
            q1: "解析：B 錯誤，故事並未提及「不斷的宗教儀式」，而是「無私的善舉」；E 錯誤，故事並非商業教學，而是關於善念與家庭美德。",
            q2: "解析：B 錯誤，老爺爺沒有忽略最後一尊，而是用了自己的頭巾；E 錯誤，老爺爺下山是為了賣斗笠買年糕，並非變賣家中物資換裝飾品。",
            q3: "解析：C 錯誤，選項將「繼」與「斷」的意思完全顛倒了；E 錯誤，文本中「納」有接受、享受之意。",
            q4: "解析：C 錯誤，此句型表示「轉折」與「程度遞進」，並非平行無關；E 錯誤，此句型是用來強調老婆婆的反應（轉折點），而非強調悲慘遭遇。",
            q5: "解析：B 錯誤，文本描述是看見「遠處的身影漸漸消失」，並非菩薩親手交給他們禮物（物資是堆在門外的）。"
        };

        let score = 0;
        let totalQuestions = Object.keys(answers).length;

        for (let q in answers) {
            const container = document.getElementById(q);
            const feedbackDiv = container.querySelector('.feedback');
            const inputs = container.querySelectorAll('input[type="checkbox"]');
            
            // Get user selection
            let userSelection = [];
            inputs.forEach(input => {
                if (input.checked) userSelection.push(input.value);
            });

            // Sort arrays for comparison
            userSelection.sort();
            const correctAnswers = answers[q].sort();

            // Compare
            const isCorrect = JSON.stringify(userSelection) === JSON.stringify(correctAnswers);
            
            // Render Feedback
            feedbackDiv.style.display = 'block';
            feedbackDiv.className = 'feedback ' + (isCorrect ? 'correct' : 'incorrect');
            
            if (isCorrect) {
                feedbackDiv.innerHTML = "<strong>正確！</strong><br>" + explanations[q];
                score++;
            } else {
                feedbackDiv.innerHTML = "<strong>回答錯誤。</strong> <br>正確答案應包含： " + correctAnswers.join(", ") + "。<br><div class='explanation'>" + explanations[q] + "</div>";
            }
        }

        alert(`測驗結束！您的得分是： ${score} / ${totalQuestions}`);
    }
</script>

</body>
</html>
