<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>單字拼寫測驗</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* 使用 min-height 確保內容多時可以滾動 */
            margin: 20px 0; /* 增加上下邊距 */
            background-color: #f0f0f0;
        }
        .container {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            width: 90%; /* 使用百分比寬度 */
            max-width: 500px; /* 設定最大寬度 */
        }
        h1 {
            color: #333;
            margin-top: 10px;
        }
        #game-image {
            width: 100%;
            max-width: 300px;
            height: auto;
            object-fit: contain;
            margin-bottom: 10px;
        }
        #question {
            font-size: 24px;
            margin: 20px 0;
            line-height: 1.4;
        }
        input {
            padding: 10px;
            font-size: 18px;
            width: 80%;
            margin-bottom: 10px;
        }
        button {
            padding: 10px 20px;
            font-size: 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        #result {
            font-size: 20px;
            margin-top: 20px;
        }
        #mnemonic {
            font-size: 16px;
            margin-top: 10px;
            color: #3d5afe;
            text-align: left;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            background-color: #f3f4ff;
            line-height: 1.5;
        }
        #score {
            font-size: 18px;
            margin-top: 10px;
        }
        #wrong-words {
            font-size: 16px;
            margin-top: 20px;
            text-align: left;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <img id="game-image" src="initial.png" alt="Game Scene">
        <h1>單字拼寫測驗</h1>
        <p>請根據給出的中文意思，輸入正確的英文拼寫。共75題，順序隨機。</p>
        <div id="question"></div>
        <input type="text" id="answer" placeholder="輸入英文拼寫">
        <button id="submit">提交</button>
        <div id="result"></div>
        <div id="mnemonic" style="display: none;"></div>
        <div id="score">分數: 0 / 0</div>
        <div id="wrong-words"></div>
        <button id="restart" style="display: none; margin-top: 20px;">重新開始</button>
        <button id="retest-wrong" style="display: none; margin-top: 20px;">重測錯題</button>
    </div>

    <script>
        const words = [
            { en: 'fluff', zh: '絨毛 (ㄖㄨㄥˊ ㄇㄠˊ)', mnemonic: '專注在 flu (流感)。當一個人得流感時，他會喜歡待在柔軟(fluff)的羽毛床上。' },
            { en: 'lawn', zh: '草坪 (ㄘㄠˇ ㄆㄧㄥˊ)', mnemonic: 'lawn 聽起來像 loan (貸款)。你貸了一筆款 (loan) 來在你家門前蓋一座漂亮的草坪 (lawn)。' },
            { en: 'valley', zh: '山谷 (ㄕㄢ ㄍㄨˇ)', mnemonic: 'valley 聽起來像 wall-ey (牆壁)。山谷 (valley) 就像是兩面牆壁之間的路徑。' },
            { en: 'melt', zh: '融化 (ㄖㄨㄥˊ ㄏㄨㄚˋ)', mnemonic: '拆成 ME + LET。所以你「讓(let)我(me)」從固態變成液態，也就是融化(melt)。' },
            { en: 'disappear', zh: '消失 (ㄒㄧㄠ ㄕ)', mnemonic: '拆成 dis (否定字首) + appear (出現)。出現 (appear) 的相反就是消失 (disappear)。' },
            { en: 'bunch', zh: '一束 (ㄧ ㄕㄨˋ)', mnemonic: 'bunch 聽起來像 lunch (午餐)。我們的午餐 (lunch) 是一串 (bunch) 香蕉。' },
            { en: 'cheese', zh: '起司 (ㄑㄧˇ ㄙ)', mnemonic: '當你要拍照時，你會說 "cheese" 來讓你微笑。' },
            { en: 'hunch', zh: '直覺 (ㄓˊ ㄐㄩㄝˊ)', mnemonic: 'hunch 和 lunch (午餐) 押韻。我有一種預感 (hunch)，我朋友今天午餐 (lunch) 不會付錢。' },
            { en: 'shift', zh: '轉換 (ㄓㄨㄢˇ ㄏㄨㄢˋ)', mnemonic: '當你按鍵盤上的 SHIFT 鍵時，字母會從小寫轉換(shift)成大寫。' },
            { en: 'charge', zh: '費用 (ㄈㄟˋ ㄩㄥˋ)', mnemonic: '你負責 (in charge of) 支付電費 (charges)。' },
            { en: 'perch', zh: '棲息 (ㄑㄧ ㄒㄧ)', mnemonic: 'perch 聽起來像 search (搜尋)。鳥兒在棲息(perch)前會先搜尋(search)一個好地方。' },
            { en: 'ranch', zh: '牧場 (ㄇㄨˋ ㄔㄤˇ)', mnemonic: 'ranch 聽起來像 branch (樹枝)。牧場(ranch)工人會用樹枝(branch)來趕牛。' },
            { en: 'pinch', zh: '捏 (ㄋㄧㄝ)', mnemonic: 'pinch 和 punch (用拳猛擊) 相似。捏(pinch)一下就像是小力地捶(punch)一下。' },
            { en: 'cherry', zh: '櫻桃 (ㄧㄥ ㄊㄠˊ)', mnemonic: '聯想 cheer (歡呼)。吃到美味的櫻桃(cherry)會讓人想歡呼(cheer)。' },
            { en: 'sheep', zh: '羊 (ㄧㄤˊ)', mnemonic: '當你睡不著時，你會數羊(sheep)來幫助入睡(sleep)。' },
            { en: 'punch', zh: '一拳 (ㄧˋ ㄑㄩㄢˊ)', mnemonic: '想像在午餐(LUNCH)時間，為了搶食物而打了一拳(PUNCH)。' },
            { en: 'cheap', zh: '便宜 (ㄆㄧㄢˊ ㄧˊ)', mnemonic: '可以聯想成 cheat (欺騙)。有些便宜的(cheap)東西品質很差，讓你感覺被欺騙(cheat)了。' },
            { en: 'shelter', zh: '庇護所 (ㄅㄧˋ ㄏㄨˋ ㄙㄨㄛˇ)', mnemonic: '拆成 she + later。她(she)稍後(later)會去庇護所(shelter)。' },
            { en: 'chief', zh: '首領 (ㄕㄡˇ ㄌㄧㄥˇ)', mnemonic: '首領(chief)是團體中最主要(chief)的人物。' },
            { en: 'chance', zh: '機會 (ㄐㄧ ㄏㄨㄟˋ)', mnemonic: '如果你有機會(chance)，你會想學跳舞(dance)嗎？' },
            { en: 'football', zh: '足球 (ㄗㄨˊ ㄑㄧㄡˊ)', mnemonic: '用腳(foot)踢的球(ball)就是足球(football)。' },
            { en: 'industry', zh: '工業 (ㄍㄨㄥ ㄧㄝˋ)', mnemonic: '聯想 in-dust-try (在灰塵中嘗試)。在工業(industry)區，工人們常在充滿灰塵(dust)的環境中努力(try)。' },
            { en: 'information', zh: '資訊 (ㄗ ㄒㄩㄣˋ)', mnemonic: '資訊(information)是為了(for)國家(nation)而形成的(in)。' },
            { en: 'force', zh: '力量 (ㄌㄧˋ ㄌㄧㄤˋ)', mnemonic: '聯想 Air Force (空軍)。空軍用它的力量(force)來保衛國家。' },
            { en: 'Good-bye', zh: '再見 (ㄗㄞˋ ㄐㄧㄢˋ)', mnemonic: '說再見(Good-bye)時，我們會祝福對方一切都好(good)。' },
            { en: 'imagine', zh: '想像 (ㄒㄧㄤˇ ㄒㄧㄤˋ)', mnemonic: '你可以想像(imagine)一張魔法(magic)的圖片(image)。' },
            { en: 'humble', zh: '謙虛 (ㄑㄧㄢ ㄒㄩ)', mnemonic: 'humble 聽起來像 umbrella (雨傘)。一個謙虛的人就像普通人用的雨傘一樣樸實無華。' },
            { en: 'sound', zh: '聲音 (ㄕㄥ ㄧㄣ)', mnemonic: '聲音(sound)是從我們四周(around)傳來的。' },
            { en: 'however', zh: '然而 (ㄖㄢˊ ㄦˊ)', mnemonic: 'how + ever (無論如何)。無論如何(however)，我們還是要繼續。' },
            { en: 'Kaohsiung', zh: '高雄 (ㄍㄠ ㄒㄩㄥˊ)', mnemonic: '這是一個專有名詞，直接記憶即可。' },
            { en: 'government', zh: '政府 (ㄓㄥˋ ㄈㄨˇ)', mnemonic: '政府(government)負責治理(govern)人民。' },
            { en: 'experiment', zh: '實驗 (ㄕˊ ㄧㄢˋ)', mnemonic: '專家(expert)會做很多實驗(experiment)。' },
            { en: 'still', zh: '仍然 (ㄖㄥˊ ㄖㄢˊ)', mnemonic: 's + till (直到)。s代表複數，直到(till)現在，事情仍然(still)是這樣。' },
            { en: 'rotate', zh: '旋轉 (ㄒㄩㄢˊ ㄓㄨㄢˇ)', mnemonic: '地球繞著太陽旋轉(rotate)的速率(rate)是固定的。' },
            { en: 'move along', zh: '前進 (ㄑㄧㄢˊ ㄐㄧㄣˋ)', mnemonic: '警察會說「向前走(move along)」，意思是不要停在這裡。' },
            { en: 'reach', zh: '到達 (ㄉㄠˋ ㄉㄚˊ)', mnemonic: '富人(rich)可以輕易到達(reach)任何地方。' },
            { en: 'rise', zh: '上升 (ㄕㄤˋ ㄕㄥ)', mnemonic: '太陽從東方升起(rise)，給我們光線(rays)。' },
            { en: 'fetch', zh: '拿來 (ㄋㄚˊ ㄌㄞˊ)', mnemonic: '拆成 f(or) + e(very) + t(hing), ch(oose)。為了所有事情去選擇，然後拿來(fetch)。' },
            { en: 'wren', zh: '鷦鷯 (ㄐㄧㄠ ㄌㄧㄠˊ)', mnemonic: 'wren 和 when (何時) 只差一個字母。你何時(when)才要去看那隻鳥(wren)？' },
            { en: 'sketch', zh: '素描 (ㄙㄨˋ ㄇㄧㄠˊ)', mnemonic: '用你的技巧(skill)來畫一張草圖/素描(sketch)。' },
            { en: 'design', zh: '設計 (ㄕㄜˋ ㄐㄧˋ)', mnemonic: '一個好的設計(design)是成功的標誌(sign)。' },
            { en: 'wreck', zh: '殘骸 (ㄘㄢˊ ㄏㄞˊ)', mnemonic: 'Wreck 聽起來像 break (打破)。當你打破某樣東西後，剩下的就是殘骸 (wreck)。' },
            { en: 'comb', zh: '梳子 (ㄕㄨ ㄗ˙)', mnemonic: '把頭髮梳(comb)理好，再去轟炸(bomb)敵人。' },
            { en: 'twitch', zh: '抽搐 (ㄔㄡ ㄔㄨˋ)', mnemonic: '女巫(witch)施了魔法，讓他的臉開始抽搐(twitch)。' },
            { en: 'wrinkle', zh: '皺紋 (ㄓㄡˋ ㄨㄣˊ)', mnemonic: 'w + RINKLE (聽起來像 tinkle, 閃爍)。當年老的叔叔(uncle)眼睛閃爍(tinkle)時，你可以看到他的皺紋(wrinkle)。' },
            { en: 'ditch', zh: '溝渠 (ㄍㄡ ㄑㄩˊ)', mnemonic: 'ditch 聽起來像 dig (挖掘)。挖掘(dig)出來的就是溝渠(ditch)。' },
            { en: 'patch', zh: '補丁 (ㄅㄨˇ ㄉㄧㄥ)', mnemonic: 'patch 和 match (相配) 押韻。找一個能相配(match)的補丁(patch)來補衣服。' },
            { en: 'limb', zh: '四肢 (ㄙˋ ㄓ)', mnemonic: 'limb 和 climb (攀爬) 押韻。我們用四肢(limb)來攀爬(climb)。' },
            { en: 'align', zh: '對齊 (ㄉㄨㄟˋ ㄑㄧˊ)', mnemonic: 'a + line (一條線)。讓所有東西排成一條線(line)，就是對齊(align)。' },
            { en: 'wrench', zh: '扳手 (ㄅㄢˇ ㄕㄡˇ)', mnemonic: 'Wrench 聽起來像 wring (擰)。用扳手(wrench)來擰緊螺絲。' },
            { en: 'clutch', zh: '緊握 (ㄐㄧㄣˇ ㄨㄛˋ)', mnemonic: '當你開手排車時，你需要緊握(clutch)方向盤並踩離合器(clutch)。' },
            { en: 'snatch', zh: '搶奪 (ㄑㄧㄤˇ ㄉㄨㄛˊ)', mnemonic: 'snatch 和 match (比賽) 押韻。在比賽(match)中，你要試圖搶奪(snatch)球。' },
            { en: 'life', zh: '生活 (ㄕㄥ ㄏㄨㄛˊ)', mnemonic: '生活(life)就像一把刀(knife)，有時很鋒利。' },
            { en: 'anyway', zh: '無論如何 (ㄨˊ ㄌㄨㄣˋ ㄖㄨˊ ㄏㄜˊ)', mnemonic: '用任何(any)方式(way)都可以，無論如何(anyway)都要完成。' },
            { en: 'break', zh: '打破 (ㄉㄚˇ ㄆㄛˋ)', mnemonic: '踩剎車(brake)是為了避免發生車禍而撞破(break)東西。' },
            { en: 'desert', zh: '沙漠 (ㄕㄚ ㄇㄛˋ)', mnemonic: '在沙漠(desert)裡，你會非常渴望甜點(dessert)。' },
            { en: 'cereal', zh: '麥片 (ㄇㄞˋ ㄆㄧㄢˋ)', mnemonic: 'cereal 聽起來像 serial (連續的)。我每天早上都吃同樣的麥片(cereal)，像在看連續劇(serial)。' },
            { en: 'brave', zh: '勇敢的 (ㄩㄥˇ ㄍㄢˇ ㄉㄜ˙)', mnemonic: '一個勇敢的(brave)人會拯救(save)他人。' },
            { en: 'anywhere', zh: '任何地方 (ㄖㄣˋ ㄏㄜˊ ㄉㄧˋ ㄈㄤ)', mnemonic: '你可以穿(wear)這件衣服去任何地方(anywhere)。' },
            { en: 'loaf', zh: '一條 (ㄧ ㄊㄧㄠˊ)', mnemonic: 'loaf 和 leaf (葉子) 相似。想像用一片大葉子(leaf)包著一條(loaf)麵包。' },
            { en: 'spring', zh: '春天 (ㄔㄨㄣ ㄊㄧㄢ)', mnemonic: '在春天(spring)，萬物像彈簧(spring)一樣向上跳躍生長。' },
            { en: 'summer', zh: '夏天 (ㄒㄧㄚˋ ㄊㄧㄢ)', mnemonic: '夏天(summer)的總結(summary)就是熱。' },
            { en: 'winter', zh: '冬天 (ㄉㄨㄥ ㄊㄧㄢ)', mnemonic: '冬天(winter)時，風(wind)會變得更冷。' },
            { en: 'fall', zh: '秋天 (ㄑㄧㄡ ㄊㄧㄢ)', mnemonic: '秋天(fall)時，葉子會落下(fall)。' },
            { en: 'autumn', zh: '秋天 (ㄑㄧㄡ ㄊㄧㄢ)', mnemonic: '秋天(autumn)時，汽車(auto)的引擎聲聽起來都變得不一樣了。' },
            { en: 'exciting', zh: '令人興奮的 (ㄌㄧㄥˋ ㄖㄣˊ ㄒㄧㄥ ㄈㄣˋ ㄉㄜ˙)', mnemonic: '一場令人興奮的(exciting)電影會讓你從座位上跳起來。' },
            { en: 'horse', zh: '馬 (ㄇㄚˇ)', mnemonic: '當然(of course)，那是一匹馬(horse)。' },
            { en: 'hotel', zh: '旅館 (ㄌㄩˇ ㄍㄨㄢˇ)', mnemonic: '旅館(hotel)通常都很熱(hot)。' },
            { en: 'exercise', zh: '運動 (ㄩㄣˋ ㄉㄨㄥˋ)', mnemonic: '運動(exercise)是控制你體型(size)的最佳方式。' },
            { en: 'follow', zh: '跟隨 (ㄍㄣ ㄙㄨㄟˊ)', mnemonic: '當你跟隨(follow)別人時，你的腳步會變得很低(low)。' },
            { en: 'indicate', zh: '指出 (ㄓˇ ㄔㄨ)', mnemonic: 'in + dictate (口述)。在口述(dictate)中指出(indicate)重點。' },
            { en: 'grandson', zh: '孫子 (ㄙㄨㄣ ㄗ˙)', mnemonic: '宏偉的(grand)兒子(son)就是孫子(grandson)。' },
            { en: 'granddaughter', zh: '孫女 (ㄙㄨㄣ ㄋㄩˇ)', mnemonic: '宏偉的(grand)女兒(daughter)就是孫女(granddaughter)。' },
            { en: 'inspire', zh: '鼓舞 (ㄍㄨˇ ㄨˇ)', mnemonic: 'in + spire (尖塔)。想登上人生的尖塔(spire)，就要不斷鼓舞(inspire)自己。' },
            { en: 'flower', zh: '花 (ㄏㄨㄚ)', mnemonic: '花(flower)在水中流動(flow)。' }
        ];

        let currentQuestion = 0;
        let score = 0;
        let totalQuestions = words.length;
        let questions = [];
        let wrongWords = [];
        let isWaitingToContinue = false;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startGame(wordList = words) {
            questions = [...wordList];
            totalQuestions = questions.length;
            shuffle(questions);
            currentQuestion = 0;
            score = 0;
            wrongWords = [];
            isWaitingToContinue = false;
            document.getElementById('restart').style.display = 'none';
            document.getElementById('retest-wrong').style.display = 'none';
            document.getElementById('wrong-words').textContent = '';
            document.getElementById('answer').style.display = 'block';
            document.getElementById('submit').style.display = 'inline-block';
            document.getElementById('submit').textContent = '提交';
            document.getElementById('game-image').src = 'initial.png';
            nextQuestion();
        }

        function nextQuestion() {
            if (currentQuestion >= totalQuestions) {
                endGame();
                return;
            }
            const mnemonicEl = document.getElementById('mnemonic');
            mnemonicEl.textContent = '';
            mnemonicEl.style.display = 'none';

            isWaitingToContinue = false;
            document.getElementById('submit').textContent = '提交';
            const q = questions[currentQuestion];
            document.getElementById('question').textContent = `輸入 "${q.zh}" 的英文拼寫：`;
            document.getElementById('answer').value = '';
            document.getElementById('result').textContent = '';
            updateScore();
        }

        function checkAnswer() {
            if (isWaitingToContinue) {
                currentQuestion++;
                nextQuestion();
                return;
            }

            const userAnswer = document.getElementById('answer').value.trim().toLowerCase();
            const q = questions[currentQuestion];
            const correctAnswer = q.en.toLowerCase();

            if (userAnswer === correctAnswer) {
                score++;
                document.getElementById('result').textContent = '正確！';
                document.getElementById('result').style.color = 'green';
                document.getElementById('game-image').src = 'correct.png';
                setTimeout(() => {
                    currentQuestion++;
                    nextQuestion();
                }, 1500);
            } else {
                document.getElementById('result').textContent = `錯誤。正確答案是：${q.en}`;
                document.getElementById('result').style.color = 'red';
                document.getElementById('game-image').src = 'incorrect.png';
                
                const mnemonicEl = document.getElementById('mnemonic');
                mnemonicEl.innerHTML = `💡 <b>記憶提示：</b>${q.mnemonic}`;
                mnemonicEl.style.display = 'block';
                
                document.getElementById('submit').textContent = '繼續';
                wrongWords.push({ zh: q.zh, en: q.en, user: userAnswer, mnemonic: q.mnemonic });
                isWaitingToContinue = true;
            }
            updateScore();
        }

        function updateScore() {
            document.getElementById('score').textContent = `分數: ${score} / ${totalQuestions}`;
        }

        function endGame() {
            document.getElementById('mnemonic').style.display = 'none';
            document.getElementById('question').textContent = '測驗結束！';
            document.getElementById('answer').style.display = 'none';
            document.getElementById('submit').style.display = 'none';
            document.getElementById('result').textContent = `你的最終分數：${score} / ${totalQuestions}`;
            
            if (score === totalQuestions) {
                document.getElementById('game-image').src = 'all_correct.png';
                document.getElementById('wrong-words').textContent = '太棒了！你全部答對！';
            } else {
                document.getElementById('game-image').src = 'not_all_correct.png';
                let wrongText = '你答錯的單字：\n';
                wrongWords.forEach(w => {
                    wrongText += `- ${w.zh}: 正確答案是 "${w.en}"，你輸入 "${w.user}"\n`;
                });
                document.getElementById('wrong-words').textContent = wrongText;
                document.getElementById('retest-wrong').style.display = 'inline-block';
            }
            document.getElementById('restart').style.display = 'inline-block';
        }

        document.getElementById('submit').addEventListener('click', checkAnswer);
        document.getElementById('answer').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkAnswer();
        });
        document.getElementById('restart').addEventListener('click', () => startGame(words));
        document.getElementById('retest-wrong').addEventListener('click', () => {
            if (wrongWords.length > 0) {
                const retestWords = wrongWords.map(w => ({ en: w.en, zh: w.zh, mnemonic: w.mnemonic }));
                startGame(retestWords);
            }
        });

        startGame();
    </script>
</body>
</html>
