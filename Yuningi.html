<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–®å­—æ‹¼å¯«æ¸¬é©—</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 20px 0;
            background-color: #f0f0f0;
        }
        .container {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 500px;
        }
        h1 {
            color: #333;
            margin-top: 10px;
        }
        #game-image {
            width: 100%;
            max-width: 300px;
            height: auto;
            object-fit: contain;
            margin-bottom: 10px;
        }
        #question {
            font-size: 24px;
            margin: 20px 0;
            line-height: 1.4;
        }
        input {
            padding: 10px;
            font-size: 18px;
            width: 80%;
            margin-bottom: 10px;
        }
        button {
            padding: 10px 20px;
            font-size: 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        #result {
            font-size: 20px;
            margin-top: 20px;
        }
        #mnemonic {
            font-size: 16px;
            margin-top: 10px;
            color: #3d5afe;
            text-align: left;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            background-color: #f3f4ff;
            line-height: 1.5;
        }
        #score {
            font-size: 18px;
            margin-top: 10px;
        }
        #wrong-words {
            font-size: 16px;
            margin-top: 20px;
            text-align: left;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <img id="game-image" src="initial.png" alt="Game Scene">
        <h1>å–®å­—æ‹¼å¯«æ¸¬é©—</h1>
        <p>è«‹æ ¹æ“šçµ¦å‡ºçš„ä¸­æ–‡æ„æ€ï¼Œè¼¸å…¥æ­£ç¢ºçš„è‹±æ–‡æ‹¼å¯«ã€‚å…±32é¡Œï¼Œé †åºéš¨æ©Ÿã€‚</p>
        <div id="question"></div>
        <input type="text" id="answer" placeholder="è¼¸å…¥è‹±æ–‡æ‹¼å¯«">
        <button id="submit">æäº¤</button>
        <div id="result"></div>
        <div id="mnemonic" style="display: none;"></div>
        <div id="score">åˆ†æ•¸: 0 / 0</div>
        <div id="wrong-words"></div>
        <button id="restart" style="display: none; margin-top: 20px;">é‡æ–°é–‹å§‹</button>
        <button id="retest-wrong" style="display: none; margin-top: 20px;">é‡æ¸¬éŒ¯é¡Œ</button>
    </div>

    <script>
        const words = [
            { en: 'chilly', zh: 'å¯’å†·çš„ (ã„ã„¢ËŠ ã„Œã„¥Ë‡ ã„‰ã„œË™)', mnemonic: '`chilly` è½èµ·ä¾†åƒ `chili` (è¾£æ¤’)ã€‚é›–ç„¶è¾£æ¤’å¾ˆè¾£ï¼Œä½†å¤©æ°£æ˜¯å¯’å†·çš„ (chilly)ã€‚' },
            { en: 'freeze', zh: 'çµå†° (ã„ã„§ã„ËŠ ã„…ã„§ã„¥)', mnemonic: '`freeze` è½èµ·ä¾†åƒ `free` (è‡ªç”±) + `ze` (zero, é›¶åº¦)ã€‚ç•¶æº«åº¦é™åˆ°é›¶åº¦ (zero) æ™‚ï¼Œæ°´å°±çµå†° (freeze) äº†ã€‚' },
            { en: 'recipe', zh: 'é£Ÿè­œ (ã„•ËŠ ã„†ã„¨Ë‡)', mnemonic: '`re` + `ci` (see, çœ‹) + `pe` (pay, ä»˜éŒ¢)ã€‚æƒ³è¦çœ‹ (see) ç§˜å¯†é£Ÿè­œ (recipe)ï¼Œä½ å¿…é ˆä»˜éŒ¢ (pay)ã€‚' },
            { en: 'creature', zh: 'ç”Ÿç‰© (ã„•ã„¥ ã„¨Ë‹)', mnemonic: '`create` (å‰µé€ ) + `ure`ã€‚ä¸Šå¸å‰µé€  (create) äº†æ¯ä¸€ç¨®ç”Ÿç‰© (creature)ã€‚' },
            { en: 'control', zh: 'æ§åˆ¶ (ã„ã„¨ã„¥Ë‹ ã„“Ë‹)', mnemonic: '`control` è£¡æœ‰ `roll` (æ»¾å‹•)ã€‚ä½ å¿…é ˆæ§åˆ¶ (control) çƒï¼Œæ‰èƒ½è®“å®ƒæ»¾ (roll) åˆ°ä½ æƒ³å»çš„åœ°æ–¹ã€‚' },
            { en: 'rearrange', zh: 'é‡æ–°æ’åˆ— (ã„”ã„¨ã„¥ËŠ ã„’ã„§ã„£ ã„†ã„ËŠ ã„Œã„§ã„Ë‹)', mnemonic: '`re` (again, å†ä¸€æ¬¡) + `arrange` (æ’åˆ—)ã€‚å°±æ˜¯é‡æ–°æ’åˆ— (rearrange)ã€‚' },
            { en: 'over', zh: 'çµæŸï¼›åœ¨...ä¹‹ä¸Š (ã„ã„§ã„ËŠ ã„•ã„¨Ë‹)', mnemonic: '`over` å’Œ `cover` (è“‹å­) æŠ¼éŸ»ã€‚æŠŠè“‹å­è“‹åœ¨ (over) é‹å­ä¸Šã€‚' },
            { en: 'broke', zh: 'ç ´ç”¢çš„ï¼›æ‰“ç ´ (ã„†ã„›Ë‹ ã„”ã„¢Ë‡ ã„‰ã„œË™)', mnemonic: '`broke` è½èµ·ä¾†åƒ `borrow` (å€Ÿ)ã€‚æˆ‘ç ´ç”¢äº† (broke)ï¼Œæ‰€ä»¥æˆ‘éœ€è¦å€Ÿ (borrow) éŒ¢ã€‚' },
            { en: 'motion', zh: 'ç§»å‹•ï¼›å‹•ä½œ (ã„§ËŠ ã„‰ã„¨ã„¥Ë‹)', mnemonic: '`motion` å’Œ `ocean` (æµ·æ´‹) æŠ¼éŸ»ã€‚æµ·æ´‹ (ocean) ç¸½æ˜¯è™•æ–¼æµå‹• (motion) ç‹€æ…‹ã€‚' },
            { en: 'below', zh: 'åœ¨...ä¸‹é¢ (ã„—ã„Ë‹...ã„’ã„§ã„šË‹ ã„‡ã„§ã„¢Ë‹)', mnemonic: '`be` (æ˜¯) + `low` (ä½çš„)ã€‚è™•æ–¼ä¸€å€‹ä½ (low) çš„ä½ç½®ï¼Œå°±æ˜¯åœ¨...ä¸‹é¢ (below)ã€‚' },
            { en: 'choke', zh: 'çª’æ¯ï¼›å™ä½ (ã„“Ë‹ ã„’ã„§ËŠ)', mnemonic: '`choke` å’Œ `coke` (å¯æ¨‚) æŠ¼éŸ»ã€‚å¦‚æœä½ å–å¯æ¨‚ (Coke) å–å¤ªå¿«ï¼Œä½ å¯èƒ½æœƒå™ä½ (choke)ã€‚' },
            { en: 'stolen', zh: 'è¢«å·çš„ (ã„…ã„ŸË‹ ã„Šã„¡ ã„‰ã„œË™)', mnemonic: '`stolen` æ˜¯ `steal` (å·) çš„éå»åˆ†è©ã€‚`s` + `to` + `len` (lend, å€Ÿ)ã€‚æˆ‘æ²’å€Ÿ (lend) çµ¦ä½ ï¼Œæ˜¯ä½ å· (stole) çš„ï¼' },
            { en: 'noble', zh: 'é«˜å°šçš„ï¼›è²´æ— (ã„ã„  ã„•ã„¤Ë‹ ã„‰ã„œË™)', mnemonic: '`No` (ä¸) + `bull` (è¬Šè¨€/èƒ¡èªª)ã€‚ä¸€å€‹é«˜å°šçš„ (noble) äººä¸èªªè¬Š (no bull)ã€‚' },
            { en: 'moment', zh: 'ç‰‡åˆ» (ã„†ã„§ã„¢Ë‹ ã„ã„œË‹)', mnemonic: '`mom` (åª½åª½) + `ent` (enter, é€²å…¥)ã€‚ç­‰ä¸€ä¸‹ (moment)ï¼Œåª½åª½ (mom) æ­£è¦é€²ä¾† (enter)ã€‚' },
            { en: 'swallow', zh: 'ååš¥ï¼›ç‡•å­ (ã„Šã„¨ã„£ ã„§ã„¢Ë‹)', mnemonic: '`swallow` å’Œ `hollow` (ç©ºçš„) æŠ¼éŸ»ã€‚å¦‚æœä½ çš„è‚šå­ç©ºç©ºçš„ (hollow)ï¼Œä½ æœƒæƒ³ååš¥ (swallow) é£Ÿç‰©ã€‚' },
            { en: 'notice', zh: 'æ³¨æ„ (ã„“ã„¨Ë‹ ã„§Ë‹)', mnemonic: '`not` (ä¸/æ²’æœ‰) + `ice` (å†°)ã€‚æ³¨æ„ (notice) è·¯ä¸Šæ²’æœ‰å†° (no ice)ã€‚' },
            { en: 'spoke', zh: 'èªªè©± (ã„•ã„¨ã„› ã„ã„¨ã„šË‹)', mnemonic: '`spoke` å’Œ `poke` (æˆ³) æŠ¼éŸ»ã€‚ä»–ä¸€é‚Šæˆ³ (poke) æˆ‘ï¼Œä¸€é‚Šè·Ÿæˆ‘èªªè©± (spoke)ã€‚' },
            { en: 'croak', zh: 'å‘±å‘±å« (ã„ã„¨ã„š ã„ã„¨ã„š ã„ã„§ã„ Ë‹)', mnemonic: '`croak` è½èµ·ä¾†åƒ `crow` (çƒé´‰) + `oak` (æ©¡æ¨¹)ã€‚é’è›™åœ¨æ©¡æ¨¹ (oak) æ—å‘±å‘±å« (croak)ã€‚' },
            { en: 'propose', zh: 'æè­°ï¼›æ±‚å©š (ã„Šã„§ËŠ ã„§Ë‹)', mnemonic: '`propose` (æ±‚å©š) è½èµ·ä¾†åƒ `pop` (æ‹¿å‡º) + `rose` (ç«ç‘°)ã€‚æ±‚å©š (propose) æ™‚ï¼Œä½ å¯èƒ½æœƒæ‹¿å‡ºç«ç‘° (rose)ã€‚' },
            { en: 'hollow', zh: 'ä¸­ç©ºçš„ (ã„“ã„¨ã„¥ ã„ã„¨ã„¥ ã„‰ã„œË™)', mnemonic: '`hole` (æ´) + `low` (ä½çš„/æ·±çš„)ã€‚ä¸€å€‹å¾ˆæ·±çš„æ´ (hole) æ˜¯ä¸­ç©ºçš„ (hollow)ã€‚' },
            { en: 'although', zh: 'é›–ç„¶ (ã„™ã„¨ã„Ÿ ã„–ã„¢ËŠ)', mnemonic: 'æ‹†è§£æˆ `all` (å…¨éƒ¨) + `though` (é›–ç„¶)ã€‚' },
            { en: 'diary', zh: 'æ—¥è¨˜ (ã„–Ë‹ ã„ã„§Ë‹)', mnemonic: '`di` (die, æ­») + `ary`ã€‚å¦‚æœæˆ‘æ­»äº† (die)ï¼Œè«‹è®€æˆ‘çš„æ—¥è¨˜ (diary)ã€‚' },
            { en: 'grand', zh: 'å®å‰çš„ (ã„ã„¨ã„¥ËŠ ã„¨ã„ŸË‡ ã„‰ã„œË™)', mnemonic: '`grand` å’Œ `brand` (å“ç‰Œ) æŠ¼éŸ»ã€‚å¤§å“ç‰Œ (brand) é€šå¸¸æœ‰å®å‰çš„ (grand) è¾¦å…¬å®¤ã€‚' },
            { en: 'German', zh: 'å¾·åœ‹äºº (ã„‰ã„œËŠ ã„ã„¨ã„›ËŠ ã„–ã„£ËŠ)', mnemonic: '`germ` (ç´°èŒ) + `man` (ç”·äºº)ã€‚åˆ¥æŠŠå¾·åœ‹ (German) ç”·äºº (man) å«æˆç´°èŒ (germ)ï¼' },
            { en: 'homerun', zh: 'å…¨å£˜æ‰“ (ã„‘ã„©ã„¢ËŠ ã„Œã„ŸË‡ ã„‰ã„šË‡)', mnemonic: '`home` (å®¶) + `run` (è·‘)ã€‚è·‘ (run) å›å®¶ (home) å°±æ˜¯å…¨å£˜æ‰“ (homerun)ã€‚' },
            { en: 'elephant', zh: 'å¤§è±¡ (ã„‰ã„šË‹ ã„’ã„§ã„¤Ë‹)', mnemonic: '`elephant` (å¤§è±¡) çš„å­—å°¾æ˜¯ `ant` (èèŸ»)ã€‚è·ŸèèŸ» (ant) æ¯”èµ·ä¾†ï¼Œå¤§è±¡ (elephant) è¶…å·¨å¤§çš„ã€‚' },
            { en: 'house', zh: 'æˆ¿å­ (ã„ˆã„¤ËŠ ã„—Ë™)', mnemonic: '`house` å’Œ `mouse` (è€é¼ ) æŠ¼éŸ»ã€‚æˆ¿å­ (house) è£¡æœ‰ä¸€éš»è€é¼  (mouse)ã€‚' },
            { en: 'eighty', zh: 'å…«å (ã„…ã„š ã„•ËŠ)', mnemonic: '`eight` (å…«) + `y`ã€‚' },
            { en: 'develop', zh: 'ç™¼å±• (ã„ˆã„š ã„“ã„¢Ë‡)', mnemonic: '`devil` (é­”é¬¼) + `up` (å‘ä¸Š)ã€‚åˆ¥è®“å¿ƒä¸­çš„é­”é¬¼ (devil) ç™¼å±• (develop) å£¯å¤§ (up)ã€‚' },
            { en: 'forest', zh: 'æ£®æ— (ã„™ã„£ ã„Œã„§ã„£ËŠ)', mnemonic: '`for` (ç‚ºäº†) + `rest` (ä¼‘æ¯)ã€‚å»æ£®æ— (forest) ç‚ºäº†ä¼‘æ¯ (for rest)ã€‚' },
            { en: 'huge', zh: 'å·¨å¤§çš„ (ã„ã„©Ë‹ ã„‰ã„šË‹ ã„‰ã„œË™)', mnemonic: '`huge` (å·¨å¤§çš„) è£¡æœ‰ `hug` (æ“æŠ±)ã€‚çµ¦ä¸€å€‹å·¨å¤§çš„ (huge) æ“æŠ± (hug)ã€‚' },
            { en: 'meaning', zh: 'æ„ç¾© (ã„§Ë‹ ã„§Ë‹)', mnemonic: '`mean` (åˆ»è–„çš„) + `ing`ã€‚åˆ»è–„ (mean) çš„æ„ç¾© (meaning) æ˜¯ä»€éº¼ï¼Ÿ' }
        ];

        let currentQuestion = 0;
        let score = 0;
        let totalQuestions = words.length;
        let questions = [];
        let wrongWords = [];
        let isWaitingToContinue = false;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startGame(wordList = words) {
            questions = [...wordList];
            totalQuestions = questions.length;
            shuffle(questions);
            currentQuestion = 0;
            score = 0;
            wrongWords = [];
            isWaitingToContinue = false;
            document.getElementById('restart').style.display = 'none';
            document.getElementById('retest-wrong').style.display = 'none';
            document.getElementById('wrong-words').textContent = '';
            document.getElementById('answer').style.display = 'block';
            document.getElementById('submit').style.display = 'inline-block';
            document.getElementById('submit').textContent = 'æäº¤';
            document.getElementById('game-image').src = 'initial.png';
            nextQuestion();
        }

        function nextQuestion() {
            if (currentQuestion >= totalQuestions) {
                endGame();
                return;
            }
            const mnemonicEl = document.getElementById('mnemonic');
            mnemonicEl.textContent = '';
            mnemonicEl.style.display = 'none';

            isWaitingToContinue = false;
            document.getElementById('submit').textContent = 'æäº¤';
            const q = questions[currentQuestion];
            document.getElementById('question').textContent = `è¼¸å…¥ "${q.zh}" çš„è‹±æ–‡æ‹¼å¯«ï¼š`;
            document.getElementById('answer').value = '';
            document.getElementById('result').textContent = '';
            updateScore();
        }

        function checkAnswer() {
            if (isWaitingToContinue) {
                currentQuestion++;
                nextQuestion();
                return;
            }

            const userAnswer = document.getElementById('answer').value.trim().toLowerCase();
            const q = questions[currentQuestion];
            const correctAnswer = q.en.toLowerCase();

            if (userAnswer === correctAnswer) {
                score++;
                document.getElementById('result').textContent = 'æ­£ç¢ºï¼';
                document.getElementById('result').style.color = 'green';
                document.getElementById('game-image').src = 'correct.png';
                setTimeout(() => {
                    currentQuestion++;
                    nextQuestion();
                }, 1500);
            } else {
                document.getElementById('result').textContent = `éŒ¯èª¤ã€‚æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${q.en}`;
                document.getElementById('result').style.color = 'red';
                document.getElementById('game-image').src = 'incorrect.png';
                
                const mnemonicEl = document.getElementById('mnemonic');
                mnemonicEl.innerHTML = `ğŸ’¡ <b>è¨˜æ†¶æç¤ºï¼š</b>${q.mnemonic}`;
                mnemonicEl.style.display = 'block';
                
                document.getElementById('submit').textContent = 'ç¹¼çºŒ';
                wrongWords.push({ zh: q.zh, en: q.en, user: userAnswer, mnemonic: q.mnemonic });
                isWaitingToContinue = true;
            }
            updateScore();
        }

        function updateScore() {
            document.getElementById('score').textContent = `åˆ†æ•¸: ${score} / ${totalQuestions}`;
        }

        function endGame() {
            document.getElementById('mnemonic').style.display = 'none';
            document.getElementById('question').textContent = 'æ¸¬é©—çµæŸï¼';
            document.getElementById('answer').style.display = 'none';
            document.getElementById('submit').style.display = 'none';
            document.getElementById('result').textContent = `ä½ çš„æœ€çµ‚åˆ†æ•¸ï¼š${score} / ${totalQuestions}`;
            
            if (score === totalQuestions) {
                document.getElementById('game-image').src = 'all_correct.png';
                document.getElementById('wrong-words').textContent = 'å¤ªæ£’äº†ï¼ä½ å…¨éƒ¨ç­”å°ï¼';
            } else {
                document.getElementById('game-image').src = 'not_all_correct.png';
                let wrongText = 'ä½ ç­”éŒ¯çš„å–®å­—ï¼š\n';
                wrongWords.forEach(w => {
                    wrongText += `- ${w.zh}: æ­£ç¢ºç­”æ¡ˆæ˜¯ "${w.en}"ï¼Œä½ è¼¸å…¥ "${w.user}"\n`;
                });
                document.getElementById('wrong-words').textContent = wrongText;
                document.getElementById('retest-wrong').style.display = 'inline-block';
            }
            document.getElementById('restart').style.display = 'inline-block';
        }

        document.getElementById('submit').addEventListener('click', checkAnswer);
        document.getElementById('answer').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkAnswer();
        });
        document.getElementById('restart').addEventListener('click', () => startGame(words));
        document.getElementById('retest-wrong').addEventListener('click', () => {
            if (wrongWords.length > 0) {
                const retestWords = wrongWords.map(w => ({ en: w.en, zh: w.zh, mnemonic: w.mnemonic }));
                startGame(retestWords);
            }
        });

        startGame();
    </script>
</body>
</html>
